[tool.poetry]
name = "impresso-pipelines"
version = "0.4.3"
description = "A custom package for language identification subpackage and OCR QA score calculation subpackage (imitating pipelines)"
authors = ["Glebs Vinarskis <gleb.vinarskis@gmail.com>"]
readme = "README.md"

[tool.poetry.dependencies]
python = ">=3.9,<3.13"
cython = "*"
numpy = "1.26.4"
floret = { version = "*", optional = true }
pybloomfiltermmap3 = { version = "*", optional = true }
transformers = { version = "*", optional = true }
jpype1 = "^1.4.1"  # For Java integration
smart_open = "^6.3.0"  # For handling S3 and other file streams
boto3 = "^1.28.0"  # For S3 interactions
python-dotenv = "^1.0.0"  # For environment variable management
spacy = "3.8.4"  # For text lemmatization

[tool.poetry.urls]
homepage = "https://github.com/impresso/impresso-pipelines"

[tool.poetry.extras]
langident = ["huggingface_hub", "floret"]
ocrqa = ["pybloomfiltermmap3", "huggingface_hub", "floret", "transformers"]
mallet = [
    "huggingface_hub",
    "floret",
    "spacy",
    "jpype1",  # For Java integration
    "smart_open",  # For handling S3 and other file streams
    "boto3",  # For S3 interactions
    "python-dotenv"  # For environment variable management
]
all = ["pybloomfiltermmap3", "huggingface_hub", "floret", "transformers"]

[tool.poetry.dev-dependencies]
pytest = "^7.2"
flake8 = "^6.0"
mypy = "^1.2"
pytest-cov = "^4.0"  # Optional for test coverage

[build-system]
build-backend = "poetry.core.masonry.api"
requires = ["poetry-core>=1.0.0"]