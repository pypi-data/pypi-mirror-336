"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[863],{3863:(e,s,n)=>{n.r(s),n.d(s,{default:()=>L});var r=n(9379),i=n(5043),t=n(7353),a=n(1637),l=n(2110),c=n(6494),o=n(4496),d=n(4194),A=n(9650),x=n(1596),u=n(1806),h=n(4882),j=n(8076),v=n(39),y=n(3460),m=n(7392),p=n(8483),g=n(4993),f=n(4056),b=n(1906),k=n(35),C=n(6600),I=n(5316),P=n(5795),w=n(9347),K=n(794),E=n(3560),S=n(3632),D=n(3559),q=n(9049),N=n(141),W=n(1387),M=n(4859),V=n(125),z=n(7544),B=n(579);const L=function(){const{secrets:e,loading:s,error:n,updateSecrets:L}=(0,z.O)(),[O,H]=(0,i.useState)(!1),[F,G]=(0,i.useState)(null),[J,Q]=(0,i.useState)({open:!1,message:"",severity:"success"}),[R,T]=(0,i.useState)({}),[U,X]=(0,i.useState)(!1),[Y,Z]=(0,i.useState)({name:"",value:"",description:""}),[$,_]=(0,i.useState)(!1),[ee,se]=(0,i.useState)(0),ne=(0,i.useCallback)((function(e){Q({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})}),[]),re=(0,i.useCallback)((async()=>{try{const e=V.M.getInstance(),s=await e.getAPIKeys();L(s)}catch(n){ne(n instanceof Error?n.message:"Error fetching API keys","error")}}),[ne,L]);(0,i.useEffect)((()=>{(async()=>{try{const e=V.M.getInstance(),s=await e.isDatabricksEnabled();_(s)}catch(n){console.error("Error checking Databricks enabled state:",n),_(!1)}})()}),[]);const ie=e.filter((e=>"sqlite"===e.source)),te=e.filter((e=>"databricks"===e.source));if(s)return(0,B.jsx)(t.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,B.jsx)(a.A,{})});if(n)return(0,B.jsx)(l.A,{sx:{mt:8},children:(0,B.jsxs)(c.A,{children:[(0,B.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,B.jsx)(q.A,{sx:{mr:1,color:"error.main"}}),(0,B.jsx)(o.A,{variant:"h5",children:"API Keys & Secrets"})]}),(0,B.jsx)(d.A,{severity:"error",sx:{mb:2},children:n})]})});const ae=(e,s)=>{const i="databricks"===s&&!$;return(0,B.jsx)(t.A,{sx:{opacity:i?.6:1,pointerEvents:i?"none":"auto"},children:(0,B.jsx)(A.A,{component:x.A,sx:{mt:2},children:(0,B.jsxs)(u.A,{children:[(0,B.jsx)(h.A,{children:(0,B.jsxs)(j.A,{children:[(0,B.jsx)(v.A,{children:"Key Name"}),(0,B.jsx)(v.A,{children:"Value"}),(0,B.jsx)(v.A,{children:"Description"}),(0,B.jsx)(v.A,{children:"Scope"}),(0,B.jsx)(v.A,{children:"Actions"})]})}),(0,B.jsx)(y.A,{children:0===e.length?(0,B.jsx)(j.A,{children:(0,B.jsx)(v.A,{colSpan:5,align:"center",children:"No API keys found"})}):e.map((e=>{return(0,B.jsxs)(j.A,{children:[(0,B.jsx)(v.A,{children:e.name}),(0,B.jsx)(v.A,{children:(0,B.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(s=e.value,i=R[e.id],i?s:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"),(0,B.jsx)(m.A,{size:"small",onClick:()=>{return s=e.id,void T((e=>(0,r.A)((0,r.A)({},e),{},{[s]:!e[s]})));var s},children:R[e.id]?(0,B.jsx)(D.A,{}):(0,B.jsx)(S.A,{})})]})}),(0,B.jsx)(v.A,{children:e.description}),(0,B.jsx)(v.A,{children:e.scope}),(0,B.jsx)(v.A,{children:(0,B.jsxs)(t.A,{sx:{display:"flex",gap:1},children:[(0,B.jsx)(p.A,{title:"Edit",children:(0,B.jsx)(m.A,{onClick:()=>(e=>{G(e),H(!0)})(e),children:(0,B.jsx)(E.A,{})})}),(0,B.jsx)(p.A,{title:"Delete",children:(0,B.jsx)(m.A,{onClick:()=>(async e=>{if(window.confirm('Are you sure you want to delete the key "'.concat(e,'"?')))try{const s=V.M.getInstance(),n=await s.deleteAPIKey(e);await re(),ne(n.message)}catch(n){ne(n instanceof Error?n.message:"Error deleting API key","error")}})(e.name),color:"error",children:(0,B.jsx)(W.A,{})})})]})})]},e.id);var s,i}))})]})})})};return(0,B.jsx)(l.A,{sx:{mt:8},children:(0,B.jsxs)(c.A,{children:[(0,B.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,B.jsx)(q.A,{sx:{mr:1,color:"primary.main"}}),(0,B.jsx)(o.A,{variant:"h5",children:"API Keys & Secrets"})]}),(0,B.jsxs)(g.A,{value:ee,onChange:(e,s)=>{se(s)},sx:{mb:2},children:[(0,B.jsx)(f.A,{icon:(0,B.jsx)(q.A,{}),label:"Local Keys",iconPosition:"start"}),(0,B.jsx)(f.A,{icon:(0,B.jsx)(M.A,{}),label:"Databricks Keys",iconPosition:"start",disabled:!$})]}),0===ee&&(0,B.jsxs)(t.A,{children:[(0,B.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Local API Keys"}),ae(ie,"sqlite")]}),1===ee&&(0,B.jsxs)(t.A,{children:[(0,B.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Databricks API Keys"}),$?ae(te,"databricks"):(0,B.jsx)(d.A,{severity:"info",sx:{mt:2},children:"Databricks integration is disabled. Enable it in the Configuration page to use Databricks API keys."})]}),(0,B.jsx)(t.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:(0,B.jsx)(b.A,{variant:"contained",startIcon:(0,B.jsx)(N.A,{}),onClick:()=>X(!0),children:"Add New Key"})}),(0,B.jsxs)(k.A,{open:O,onClose:()=>H(!1),children:[(0,B.jsx)(C.A,{children:"Edit API Key"}),(0,B.jsx)(I.A,{children:(0,B.jsxs)(t.A,{sx:{pt:2,display:"flex",flexDirection:"column",gap:2},children:[(0,B.jsx)(P.A,{label:"Key Name",value:(null===F||void 0===F?void 0:F.name)||"",disabled:!0,fullWidth:!0}),(0,B.jsx)(P.A,{label:"Value",value:(null===F||void 0===F?void 0:F.value)||"",onChange:e=>G((s=>s?(0,r.A)((0,r.A)({},s),{},{value:e.target.value}):null)),fullWidth:!0,required:!0}),(0,B.jsx)(P.A,{label:"Description",value:(null===F||void 0===F?void 0:F.description)||"",onChange:e=>G((s=>s?(0,r.A)((0,r.A)({},s),{},{description:e.target.value}):null)),fullWidth:!0})]})}),(0,B.jsxs)(w.A,{children:[(0,B.jsx)(b.A,{onClick:()=>H(!1),children:"Cancel"}),(0,B.jsx)(b.A,{onClick:async()=>{try{if(null===F||void 0===F||!F.value)return void ne("Value is required","error");const e=V.M.getInstance(),s={value:F.value,description:F.description||""},n=await e.updateAPIKey(F.name,s);H(!1),await re(),ne(n.message)}catch(n){ne(n instanceof Error?n.message:"Error updating API key","error")}},variant:"contained",children:"Save"})]})]}),(0,B.jsxs)(k.A,{open:U,onClose:()=>X(!1),children:[(0,B.jsx)(C.A,{children:"Add New API Key"}),(0,B.jsx)(I.A,{children:(0,B.jsxs)(t.A,{sx:{pt:2,display:"flex",flexDirection:"column",gap:2},children:[(0,B.jsx)(P.A,{label:"Key Name",value:Y.name,onChange:e=>Z((s=>(0,r.A)((0,r.A)({},s),{},{name:e.target.value}))),fullWidth:!0,required:!0}),(0,B.jsx)(P.A,{label:"Value",value:Y.value,onChange:e=>Z((s=>(0,r.A)((0,r.A)({},s),{},{value:e.target.value}))),fullWidth:!0,required:!0}),(0,B.jsx)(P.A,{label:"Description",value:Y.description,onChange:e=>Z((s=>(0,r.A)((0,r.A)({},s),{},{description:e.target.value}))),fullWidth:!0})]})}),(0,B.jsxs)(w.A,{children:[(0,B.jsx)(b.A,{onClick:()=>X(!1),children:"Cancel"}),(0,B.jsx)(b.A,{onClick:async()=>{try{if(!Y.name||!Y.value)return void ne("Name and value are required","error");const e=V.M.getInstance(),s=await e.createAPIKey({name:Y.name.trim(),value:Y.value,description:Y.description||""});X(!1),Z({name:"",value:"",description:""}),await re(),ne(s.message)}catch(n){ne(n instanceof Error?n.message:"Error creating API key","error")}},variant:"contained",children:"Create"})]})]}),(0,B.jsx)(K.A,{open:J.open,autoHideDuration:6e3,onClose:()=>Q((e=>(0,r.A)((0,r.A)({},e),{},{open:!1}))),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,B.jsx)(d.A,{onClose:()=>Q((e=>(0,r.A)((0,r.A)({},e),{},{open:!1}))),severity:J.severity,sx:{width:"100%"},children:J.message})})]})})}}}]);
//# sourceMappingURL=863.a809e096.chunk.js.map