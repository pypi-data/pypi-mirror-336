# Создание первого бота

В этом разделе мы создадим простого бота, который будет отвечать на команду `/start` и сообщение 'привет'.

## Получение токена

Для начала вам нужно получить токен для вашего бота. Для этого:

1. Откройте диалог с [MasterBot](https://max.ru/masterbot)
2. Следуйте инструкциям по созданию нового бота
3. После создания бота, MasterBot отправит вам токен

Полученный токен — это строка вида `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`, которую вы будете использовать для аутентификации вашего бота.

## Установка библиотеки

Установите библиотеку maxgram с помощью pip:

```bash
pip install maxgram
```

## Создание простого эхо-бота

Создайте файл `echo_bot.py` со следующим содержимым:

```python
import os
from maxgram import Bot

# Получение токена из переменной окружения
BOT_TOKEN = os.environ.get("BOT_TOKEN")

# Если токен не указан в переменной окружения
if not BOT_TOKEN:
    BOT_TOKEN = "YOUR_BOT_TOKEN"  # Замените на свой токен

# Создание экземпляра бота
bot = Bot(BOT_TOKEN)

# Обработчик команды /start
@bot.command("start")
async def start_command(ctx):
    await ctx.reply("Привет! Я эхо-бот. Напиши мне что-нибудь, и я отправлю это в ответ.")

# Обработчик для всех текстовых сообщений
@bot.on("message_created")
async def echo(ctx):
    if hasattr(ctx.message.body, "text") and ctx.message.body.text:
        await ctx.reply(ctx.message.body.text)

# Запуск бота
bot.start()
```

Для запуска бота:

```bash
# Установка токена как переменной окружения
export BOT_TOKEN=ваш_токен_здесь

# Запуск бота
python echo_bot.py
```

## Использование переменной окружения для хранения токена

Рекомендуется хранить токен бота в переменной окружения, а не напрямую в коде. Для этого можете использовать библиотеку `python-dotenv`, которая автоматически загружает переменные окружения из файла `.env`:

```bash
pip install python-dotenv
```

Создайте файл `.env` в корне вашего проекта:

```
BOT_TOKEN=ваш_токен_здесь
```

И обновите ваш код:

```python
import os
from dotenv import load_dotenv
from maxgram import Bot

# Загрузка переменных окружения из файла .env
load_dotenv()

# Получение токена из переменной окружения
BOT_TOKEN = os.environ.get("BOT_TOKEN")

if not BOT_TOKEN:
    raise ValueError("Не указан токен бота. Добавьте его в переменную окружения BOT_TOKEN")

# Создание экземпляра бота
bot = Bot(BOT_TOKEN)

# ... остальной код
```

## Что дальше?

Поздравляем! Вы создали своего первого бота для Max. Теперь можете перейти к следующим разделам документации, чтобы узнать, как:

- [Обрабатывать события и реагировать на них](./02-listen-and-respond.md)
- [Работать с вложениями и файлами](./03-attachments.md)
- [Создавать интерактивные клавиатуры](./04-keyboard.md)
- [Настраивать контекст под свои нужды](./05-custom-context.md) 