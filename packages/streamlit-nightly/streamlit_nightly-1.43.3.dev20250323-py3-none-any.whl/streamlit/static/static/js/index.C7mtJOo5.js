import{n as U,r as o,bh as k,z as H,cr as S,C as B,j as r,br as j,bF as O,bs as _,ba as w,bt as K,D as $,cs as q}from"./index.CSu8uGcy.js";import{u as A}from"./uniqueId.BR7o9Ap9.js";import{u as G,a as N,b as J}from"./useOnInputChange.B20T1pKy.js";import{a as M}from"./useBasicWidgetState.Dl0fFJUN.js";import{I as Q}from"./InputInstructions.CY0iaCAH.js";import{I as X}from"./input.CO7BKD8r.js";import"./inputUtils.CQWz5UKz.js";import"./FormClearHelper.t3Y3brxz.js";import"./base-input.DBVZTUu3.js";const Y=U("div",{target:"e1o1zy6o0"})("position:relative;");function Z({disabled:e,element:t,widgetMgr:s,fragmentId:u}){var b,I;const[n,l]=o.useState(()=>W(s,t)??null),[y,T]=k(),[i,d]=o.useState(!1),x=o.useCallback(()=>{l(t.default??null),d(!0)},[t.default]),[C,c]=M({getStateFromWidgetMgr:W,getDefaultStateFromProto:tt,getCurrStateFromProto:at,updateWidgetMgrState:et,element:t,widgetMgr:s,fragmentId:u,onFormCleared:x});G(C,n,l,i);const[V,m]=o.useState(!1),a=H(),[h]=o.useState(()=>A("text_input_")),{placeholder:F,formId:f}=t,p=o.useCallback(()=>{d(!1),c({value:n,fromUi:!0})},[n,c]),z=S({formId:f})?s.allowFormEnterToSubmit(f):i,v=V&&y>a.breakpoints.hideWidgetDetails,E=o.useCallback(()=>{i&&p(),m(!1)},[i,p]),R=o.useCallback(()=>{m(!0)},[]),L=N({formId:t.formId,maxChars:t.maxChars,setDirty:d,setUiValue:l,setValueWithSource:c}),P=J(t.formId,p,i,s,u),g=(b=t.icon)==null?void 0:b.startsWith(":material"),D=g?"lg":"base";return B(Y,{className:"stTextInput","data-testid":"stTextInput",ref:T,children:[r(K,{label:t.label,disabled:e,labelVisibility:j((I=t.labelVisibility)==null?void 0:I.value),htmlFor:h,children:t.help&&r(O,{children:r(_,{content:t.help,placement:w.TOP_RIGHT})})}),r(X,{value:n??"",placeholder:F,onBlur:E,onFocus:R,onChange:L,onKeyPress:P,"aria-label":t.label,disabled:e,id:h,type:ot(t),autoComplete:t.autocomplete,startEnhancer:t.icon&&r($,{"data-testid":"stTextInputIcon",iconValue:t.icon,size:D}),overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:a.lineHeights.inputWidget,paddingRight:a.spacing.sm,paddingLeft:a.spacing.sm,paddingBottom:a.spacing.sm,paddingTop:a.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:a.sizes.minElementHeight,borderLeftWidth:a.sizes.borderWidth,borderRightWidth:a.sizes.borderWidth,borderTopWidth:a.sizes.borderWidth,borderBottomWidth:a.sizes.borderWidth,paddingLeft:t.icon?a.spacing.sm:0}},StartEnhancer:{style:{paddingLeft:0,paddingRight:0,minWidth:a.iconSizes.lg,color:g?a.colors.fadedText60:"inherit"}}}}),v&&r(Q,{dirty:i,value:n??"",maxLength:t.maxChars,inForm:S({formId:t.formId}),allowEnterToSubmit:z})]})}function W(e,t){return e.getStringValue(t)??null}function tt(e){return e.default??null}function at(e){return e.value??null}function et(e,t,s,u){t.setStringValue(e,s.value,{fromUi:s.fromUi},u)}function ot(e){return e.type===q.Type.PASSWORD?"password":"text"}const mt=o.memo(Z);export{mt as default};
