{"version":3,"file":"conditionSetViewTests.js","names":["suite","makeValueField","html","model","className","data","fieldHTML","view","setupConditionSetView","conditionsData","conditionsTemplate","conditionSetView","Djblets","Forms","ConditionSetView","el","$","ConditionSet","choicesData","id","name","operators","useValue","valueField","fieldName","parse","render","describe","it","choiceID","operatorID","valid","value","$rows","expect","length","toBe","$lastID","val","$row","eq","$choice","find","join","children","$operator","$value","$input","parent","prop","attr","error","$error","spyOn","and","callThrough","click","addNewCondition","toHaveBeenCalled","conditions","condition","at","destroy","trigger","get","conditionSet","$valueWrapper","beforeEach","set","choices","choice"],"sources":["../../../../../../../static/djblets/js/forms/views/tests/conditionSetViewTests.es6.js"],"sourcesContent":["suite('djblets/forms/views/ConditionValueFormFieldView', function() {\n    function makeValueField(html) {\n        return {\n            model: {\n                className: 'Djblets.Forms.ConditionValueField',\n                data: {\n                    fieldHTML: html,\n                },\n            },\n            view: {\n                className: 'Djblets.Forms.ConditionValueFormFieldView',\n            },\n        };\n    }\n\n    function setupConditionSetView(conditionsData) {\n        const conditionsTemplate = dedent`\n            <div class=\"conditions-field\">\n             <input type=\"hidden\" name=\"my_conditions_last_id\">\n             <div class=\"conditions-field-mode\"></div>\n             <div class=\"conditions-field-rows-container\">\n              <ul class=\"conditions-field-rows\"></ul>\n              <div class=\"conditions-field-add-condition\">\n               <a href=\"#\" class=\"conditions-field-action\"></a>\n              </div>\n            </div>\n           </div>\n        `;\n\n        const conditionSetView = new Djblets.Forms.ConditionSetView({\n            el: $(conditionsTemplate),\n            model: new Djblets.Forms.ConditionSet({\n                choicesData: [\n                    {\n                        id: 'my-choice-1',\n                        name: 'My Choice 1',\n                        operators: [\n                            {\n                                id: 'my-op-1',\n                                name: 'My Op 1',\n                                useValue: true,\n                            },\n                            {\n                                id: 'my-op-2',\n                                name: 'My Op 2',\n                                useValue: true,\n                                valueField: makeValueField(\n                                    '<input type=\"number\">'),\n                            },\n                        ],\n                        valueField: makeValueField('<input type=\"text\">'),\n                    },\n                    {\n                        id: 'my-choice-2',\n                        name: 'My Choice 2',\n                        operators: [\n                            {\n                                id: 'my-op-3',\n                                name: 'My Op 3',\n                                useValue: true,\n                            },\n                            {\n                                id: 'my-op-4',\n                                name: 'My Op 4',\n                                useValue: true,\n                            },\n                        ],\n                        valueField: makeValueField('<input type=\"email\">'),\n                    },\n                ],\n                conditionsData: conditionsData,\n                fieldName: 'my_conditions',\n            }, {\n                parse: true,\n            }),\n        });\n\n        conditionSetView.render();\n\n        return conditionSetView;\n    }\n\n    describe('Rendering', function() {\n        it('Loaded rows', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    valid: true,\n                    value: '<test>',\n                },\n                {\n                    choiceID: 'my-choice-2',\n                    operatorID: 'my-op-4',\n                    valid: true,\n                    value: 42,\n                },\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(2);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('1');\n\n            /* Check the first row. */\n            let $row = $rows.eq(0);\n            let $choice = $row.find('.conditions-field-choice');\n            expect($choice.html()).toBe([\n                '<select name=\"my_conditions_choice[0]\">',\n                '<option value=\"my-choice-1\">My Choice 1</option>',\n                '<option value=\"my-choice-2\">My Choice 2</option>',\n                '</select>',\n            ].join(''));\n            expect($choice.children('select').val()).toBe('my-choice-1');\n\n            let $operator = $row.find('.conditions-field-operator');\n            expect($operator.html()).toBe([\n                '<select name=\"my_conditions_operator[0]\">',\n                '<option value=\"my-op-1\">My Op 1</option>',\n                '<option value=\"my-op-2\">My Op 2</option>',\n                '</select>',\n            ].join(''));\n            expect($operator.children('select').val()).toBe('my-op-1');\n\n            let $value = $row.find('.conditions-field-value');\n            let $input = $value.find('input');\n            expect($input.parent().prop('tagName')).toBe('SPAN');\n            expect($input.attr('type')).toBe('text');\n            expect($input.attr('name')).toBe('my_conditions_value[0]');\n            expect($input.val()).toBe('<test>');\n\n            /* Check the second row. */\n            $row = $rows.eq(1);\n            $choice = $row.find('.conditions-field-choice');\n            expect($choice.html()).toBe([\n                '<select name=\"my_conditions_choice[1]\">',\n                '<option value=\"my-choice-1\">My Choice 1</option>',\n                '<option value=\"my-choice-2\">My Choice 2</option>',\n                '</select>',\n            ].join(''));\n            expect($choice.children('select').val()).toBe('my-choice-2');\n\n            $operator = $row.find('.conditions-field-operator');\n            expect($operator.html()).toBe([\n                '<select name=\"my_conditions_operator[1]\">',\n                '<option value=\"my-op-3\">My Op 3</option>',\n                '<option value=\"my-op-4\">My Op 4</option>',\n                '</select>',\n            ].join(''));\n            expect($operator.children('select').val()).toBe('my-op-4');\n\n            $value = $row.find('.conditions-field-value');\n            $input = $value.find('input');\n            expect($input.parent().prop('tagName')).toBe('SPAN');\n            expect($input.attr('type')).toBe('email');\n            expect($input.attr('name')).toBe('my_conditions_value[1]');\n            expect($input.val()).toBe('42');\n        });\n\n        it('Loaded rows with errors', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    error: 'This is an <error>.',\n                    operatorID: 'my-op-1',\n                    valid: true,\n                    value: '<test>',\n                },\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(1);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('0');\n\n            const $row = $rows.eq(0);\n            const $error = $row.find('.conditions-field-error');\n            expect($error.length).toBe(1);\n            expect($error.html()).toBe('This is an &lt;error&gt;.');\n        });\n    });\n\n    describe('Actions', function() {\n        it('Add a new condition', function() {\n            const conditionSetView = setupConditionSetView();\n\n            let $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(0);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('');\n\n            spyOn(conditionSetView.model, 'addNewCondition').and.callThrough();\n            conditionSetView.$('.conditions-field-add-condition a').click();\n            expect(conditionSetView.model.addNewCondition).toHaveBeenCalled();\n\n            $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(1);\n            expect($lastID.val()).toBe('0');\n\n            const $row = $rows.eq(0);\n            const $choice = $row.find('.conditions-field-choice');\n            expect($choice.html()).toBe([\n                '<select name=\"my_conditions_choice[0]\">',\n                '<option value=\"my-choice-1\">My Choice 1</option>',\n                '<option value=\"my-choice-2\">My Choice 2</option>',\n                '</select>',\n            ].join(''));\n            expect($choice.children('select').val()).toBe('my-choice-1');\n\n            const $operator = $row.find('.conditions-field-operator');\n            expect($operator.html()).toBe([\n                '<select name=\"my_conditions_operator[0]\">',\n                '<option value=\"my-op-1\">My Op 1</option>',\n                '<option value=\"my-op-2\">My Op 2</option>',\n                '</select>',\n            ].join(''));\n            expect($operator.children('select').val()).toBe('my-op-1');\n\n            const $value = $row.find('.conditions-field-value');\n            const $input = $value.find('input');\n            expect($input.parent().prop('tagName')).toBe('SPAN');\n            expect($input.attr('type')).toBe('text');\n            expect($input.attr('name')).toBe('my_conditions_value[0]');\n            expect($input.val()).toBe('');\n        });\n\n        it('Delete a condition', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    valid: true,\n                    value: '<test>',\n                },\n            ]);\n\n            let $rows = conditionSetView.$('.conditions-field-row');\n            expect(conditionSetView.model.conditions.length).toBe(1);\n            expect($rows.length).toBe(1);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('0');\n\n            const condition = conditionSetView.model.conditions.at(0);\n\n            spyOn(condition, 'destroy').and.callThrough();\n            $rows.eq(0).find('.conditions-field-row-delete').click();\n            expect(condition.destroy).toHaveBeenCalled();\n\n            $rows = conditionSetView.$('.conditions-field-row');\n            expect(conditionSetView.model.conditions.length).toBe(0);\n            expect($rows.length).toBe(0);\n\n            /*\n             * The last ID remains the same during deletions. It's not a row\n             * counter.\n             */\n            expect($lastID.val()).toBe('0');\n        });\n\n        it('Changing a choice updates model', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    valid: true,\n                    value: '<test>',\n                },\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            const condition = conditionSetView.model.conditions.at(0);\n\n            $rows.eq(0).find('.conditions-field-choice select')\n                .val('my-choice-2')\n                .trigger('change');\n\n            expect(condition.get('choice').id).toBe('my-choice-2');\n        });\n\n        it('Changing an operator updates model', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    valid: true,\n                    value: '<test>',\n                },\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            const condition = conditionSetView.model.conditions.at(0);\n\n            $rows.eq(0).find('.conditions-field-operator select')\n                .val('my-op-2')\n                .trigger('change');\n\n            expect(condition.get('operator').id).toBe('my-op-2');\n        });\n    });\n\n    describe('Model events', function() {\n        let conditionSetView,\n            conditionSet,\n            condition,\n            $row,\n            $choice,\n            $operator,\n            $valueWrapper;\n\n        beforeEach(function() {\n            conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    valid: true,\n                    value: '<test>',\n                },\n            ]);\n\n            conditionSet = conditionSetView.model;\n\n            condition = conditionSet.conditions.at(0);\n            $row = conditionSetView.$('.conditions-field-row').eq(0);\n            $choice = $row.find('.conditions-field-choice select');\n            $operator = $row.find('.conditions-field-operator select');\n            $valueWrapper = $row.find('.conditions-field-value');\n\n            const $input = $valueWrapper.find('input');\n            expect($input.attr('type')).toBe('text');\n            expect($input.val()).toBe('<test>');\n        });\n\n        describe('Choice changed', function() {\n            it('Updates UI state', function() {\n                condition.set('choice',\n                              conditionSet.choices.get('my-choice-2'));\n\n                expect($choice.val()).toBe('my-choice-2');\n                expect($operator.val()).toBe('my-op-3');\n\n                const $input = $valueWrapper.find('input');\n                expect($input.attr('type')).toBe('email');\n                expect($input.val()).toBe('');\n            });\n        });\n\n        describe('Operator changed', function() {\n            it('Updates UI state', function() {\n                const choice = conditionSet.choices.get('my-choice-1');\n                condition.set('operator', choice.operators.get('my-op-2'));\n\n                expect($choice.val()).toBe('my-choice-1');\n                expect($operator.val()).toBe('my-op-2');\n\n                const $input = $valueWrapper.find('input');\n                expect($input.attr('type')).toBe('number');\n                expect($input.val()).toBe('');\n            });\n\n            it('Retains value if valueField remains', function() {\n                const choice = conditionSet.choices.get('my-choice-2');\n\n                /* Set the initial conditions. */\n                condition.set('choice', choice);\n                $valueWrapper.find('input').val('42');\n                expect($operator.val()).toBe('my-op-3');\n\n                /* Trigger the operator change. */\n                condition.set('operator', choice.operators.get('my-op-4'));\n\n                expect($valueWrapper.find('input').val()).toBe('42');\n            });\n        });\n\n        describe('Value changed', function() {\n            it('Updated UI state', function() {\n                condition.set('value', 'new-value');\n\n                expect($valueWrapper.find('input').val()).toBe('new-value');\n            });\n        });\n    });\n});\n"],"mappings":"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"}