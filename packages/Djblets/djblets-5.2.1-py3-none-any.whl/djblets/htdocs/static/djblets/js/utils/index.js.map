{"version":3,"file":"index.js","sources":["../../../../../static/djblets/js/utils/urls.es6.js"],"sourcesContent":["/**\n * Build and return a URL out of different components.\n *\n * This will construct a URL based on a base URL (which may be an absolute\n * URL, a relative path, or an empty string), optional query string data (as\n * a string, a dictionary, or array), and an optional anchor name.\n *\n * Args:\n *     options (object):\n *         The options used to construct the URL.\n *\n * Option Args:\n *     anchor (unicode, optional):\n *         An anchor to append to the URL. This may include the leading ``#``,\n *         but it's optional.\n *\n *     baseURL (string, optional):\n *         The base URL to build onto, if any. If not provided, an empty\n *         string will be used.\n *\n *     queryData (*, optional):\n *         Data for the query string. This can be a string, an object, or\n *         an array of dictionaries containing ``name`` and ``value`` keys.\n *         See :js:func:`jQuery.param` for information on what's allowed here.\n *\n *         If using an object of keys and values, the sort order is not\n *         guaranteed. It will be up to the JavaScript engine. Provide a\n *         string or array to guarantee order.\n *\n *         If using a string, and the string begins with a ``?``, it will be\n *         stripped away.\n *\n * Returns:\n *     string:\n *     The resulting URL.\n */\nexport function buildURL(options={}) {\n    let url = options.baseURL || '';\n\n    /* Build the query string, if any. */\n    const queryData = options.queryData;\n\n    if (queryData) {\n        let queryString;\n\n        if (typeof queryData === 'string') {\n            queryString = queryData;\n\n            if (queryString.indexOf('?') === 0) {\n                queryString = queryString.substr(1);\n            }\n        } else {\n            queryString = $.param(queryData);\n        }\n\n        if (queryString) {\n            url += `?${queryString}`;\n        }\n    }\n\n    /* Append an anchor, if any. */\n    const anchor = options.anchor;\n\n    if (anchor) {\n        if (anchor.indexOf('#') === 0) {\n            url += anchor;\n        } else {\n            url += `#${anchor}`;\n        }\n    }\n\n    return url;\n}\n\n\n/**\n * Parse a query string for key/value pairs.\n *\n * This takes a query string in the provided URL and parses it for standard\n * key/value pairs, returning an object representing those keys and values.\n * It can handle keys without values and optionally store multiple values\n * listed for the same key.\n *\n * Args:\n *     url (string):\n *         The URL containing a query string to parse.\n *\n *     options (object, optional):\n *         Options for controlling the parsing.\n *\n * Option Args:\n *     allowMultiValue (boolean):\n *         Whether to store multiple values for the same key, if found in\n *         the query string. The value for such a key will be an array of all\n *         values. If ``false`` (the default), only last value for a key will\n *         be stored.\n *\n * Returns:\n *     object:\n *     The resulting keys and values representing the query string.\n *\n *     If there was a query string item that did not have a value (in other\n *     words, no ``=`` was present), then its value will be ``null``.\n *\n *     If ``options.allowMultiValue`` is ``true``, and a key was used more\n *     than once, then its value will be a list of all values in the query\n *     string for that key.\n */\nexport function parseQueryString(url, options={}) {\n    const allowMultiValue = options.allowMultiValue;\n\n    let j = url.indexOf('?');\n    let queryString;\n\n    if (j === -1) {\n        /* Assume the whole thing is a query string. */\n        queryString = url;\n    } else {\n        queryString = url.substr(j + 1);\n    }\n\n    const query = {};\n\n    if (queryString.length === 0) {\n        return query;\n    }\n\n    const queryParams = queryString.split('&');\n\n    for (let i = 0; i < queryParams.length; i++) {\n        const queryParam = queryParams[i];\n        let key;\n        let value;\n\n        j = queryParam.indexOf('=');\n\n        if (j === -1) {\n            key = decodeURIComponent(queryParam);\n            value = null;\n        } else {\n            key = decodeURIComponent(queryParam.substr(0, j));\n            value = decodeURIComponent(queryParam.substr(j + 1));\n        }\n\n        if (allowMultiValue && query.hasOwnProperty(key)) {\n            if (_.isArray(query[key])) {\n                query[key].push(value);\n            } else {\n                query[key] = [query[key], value];\n            }\n        } else {\n            query[key] = value;\n        }\n    }\n\n    return query;\n}\n"],"names":["buildURL","options","url","baseURL","queryData","queryString","indexOf","substr","$","param","anchor","parseQueryString","allowMultiValue","j","query","length","queryParams","split","i","queryParam","key","value","decodeURIComponent","hasOwnProperty","_","isArray","push"],"mappings":"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"}