{"version":3,"file":"privacyConsentFieldView.js","names":["Djblets","Forms","PrivacyConsentFieldView","Backbone","View","extend","events","initialize","options","$choices","$","$allowChoice","find","$blockChoice","_$allowInput","children","_$allowLabel","_$blockInput","_$blockLabel","render","_onConsentChanged","allowed","is","blocked","$el","toggleClass","text","allowedText","allowText","blockedText","blockText"],"sources":["../../../../../../static/djblets/js/forms/views/privacyConsentFieldView.es6.js"],"sourcesContent":["/**\n * Manages the display of a consent field.\n *\n * This helps style consent fields to better represent the current choice\n * made, altering labels and colors. It provides no functionality beyond\n * enhancing the look of the field beyond what can be done in CSS.\n */\nDjblets.Forms.PrivacyConsentFieldView = Backbone.View.extend({\n    events: {\n        'change input': '_onConsentChanged',\n    },\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the view.\n     *\n     * Option Args:\n     *     allowText (string):\n     *         Text to use for the allow action.\n     *\n     *     allowedText (string):\n     *         Text to use when the allow action is selected.\n     *\n     *     blockText (string):\n     *         Text to use for the block action.\n     *\n     *     blockedText (string):\n     *         Text to use when the block action is selected.\n     */\n    initialize(options) {\n        this.options = options;\n\n        const $choices = this.$('.privacy-consent-field-choices');\n        const $allowChoice =\n            $choices.find('.privacy-consent-field-choice-allow');\n        const $blockChoice =\n            $choices.find('.privacy-consent-field-choice-block');\n\n        this._$allowInput = $allowChoice.children('input');\n        this._$allowLabel = $allowChoice.children('label');\n        this._$blockInput = $blockChoice.children('input');\n        this._$blockLabel = $blockChoice.children('label');\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     Djblets.Forms.PrivacyConsentFieldView:\n     *     This view, for chaining.\n     */\n    render() {\n        this._onConsentChanged();\n\n        return this;\n    },\n\n    /**\n     * Handler for when the consent choice has changed.\n     *\n     * This will toggle classes on the field's element to reflect the\n     * current consent choice, and update the labels.\n     */\n    _onConsentChanged() {\n        const allowed = this._$allowInput.is(':checked');\n        const blocked = this._$blockInput.is(':checked');\n\n        this.$el.toggleClass('privacy-consent-field-allow', allowed);\n        this.$el.toggleClass('privacy-consent-field-block', blocked);\n\n        this._$allowLabel.text(allowed\n                               ? this.options.allowedText\n                               : this.options.allowText);\n        this._$blockLabel.text(blocked\n                               ? this.options.blockedText\n                               : this.options.blockText);\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAACC,KAAK,CAACC,uBAAuB,GAAGC,QAAQ,CAACC,IAAI,CAACC,MAAM,CAAC;EACzDC,MAAM,EAAE;IACJ,cAAc,EAAE;EACpB,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,UAAU,CAACC,OAAO,EAAE;IAChB,IAAI,CAACA,OAAO,GAAGA,OAAO;IAEtB,MAAMC,QAAQ,GAAG,IAAI,CAACC,CAAC,CAAC,gCAAgC,CAAC;IACzD,MAAMC,YAAY,GACdF,QAAQ,CAACG,IAAI,CAAC,qCAAqC,CAAC;IACxD,MAAMC,YAAY,GACdJ,QAAQ,CAACG,IAAI,CAAC,qCAAqC,CAAC;IAExD,IAAI,CAACE,YAAY,GAAGH,YAAY,CAACI,QAAQ,CAAC,OAAO,CAAC;IAClD,IAAI,CAACC,YAAY,GAAGL,YAAY,CAACI,QAAQ,CAAC,OAAO,CAAC;IAClD,IAAI,CAACE,YAAY,GAAGJ,YAAY,CAACE,QAAQ,CAAC,OAAO,CAAC;IAClD,IAAI,CAACG,YAAY,GAAGL,YAAY,CAACE,QAAQ,CAAC,OAAO,CAAC;EACtD,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;EACII,MAAM,GAAG;IACL,IAAI,CAACC,iBAAiB,EAAE;IAExB,OAAO,IAAI;EACf,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;EACIA,iBAAiB,GAAG;IAChB,MAAMC,OAAO,GAAG,IAAI,CAACP,YAAY,CAACQ,EAAE,CAAC,UAAU,CAAC;IAChD,MAAMC,OAAO,GAAG,IAAI,CAACN,YAAY,CAACK,EAAE,CAAC,UAAU,CAAC;IAEhD,IAAI,CAACE,GAAG,CAACC,WAAW,CAAC,6BAA6B,EAAEJ,OAAO,CAAC;IAC5D,IAAI,CAACG,GAAG,CAACC,WAAW,CAAC,6BAA6B,EAAEF,OAAO,CAAC;IAE5D,IAAI,CAACP,YAAY,CAACU,IAAI,CAACL,OAAO,GACL,IAAI,CAACb,OAAO,CAACmB,WAAW,GACxB,IAAI,CAACnB,OAAO,CAACoB,SAAS,CAAC;IAChD,IAAI,CAACV,YAAY,CAACQ,IAAI,CAACH,OAAO,GACL,IAAI,CAACf,OAAO,CAACqB,WAAW,GACxB,IAAI,CAACrB,OAAO,CAACsB,SAAS,CAAC;EACpD;AACJ,CAAC,CAAC"}