(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3826],{68220:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/rag/collections/[id]",function(){return l(82752)}])},82752:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>_});var a=l(37876),n=l(14232),i=l(93010),c=l(68625),r=l(14107),t=l(33810),d=l(33949),o=l(22196),x=l(7305),h=l(68509),m=l(56779),j=l(47473),u=l(37090),g=l(64553),p=l(12503),f=l(1958),N=l(73835),v=l(98594),w=l(89099),y=l(7700),b=l(67792),C=l(80798);let I=e=>{let{text:s,className:l,onViewFull:n}=e,i=s.length>200,c=i?"".concat(s.slice(0,200),"..."):s;return(0,a.jsxs)(t.Z,{className:"bg-default-50 ".concat(l),children:[(0,a.jsx)(d.U,{className:"pb-2",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap text-small",children:c})}),i&&(0,a.jsx)(C.Z,{className:"justify-end pt-0",children:(0,a.jsx)(o.T,{size:"sm",variant:"light",onPress:n,children:"View Full"})})]})},T=()=>{let e=(0,w.useRouter)(),{id:s}=e.query,{isOpen:l,onOpen:i,onClose:C}=(0,c.j)(),{isOpen:T,onOpen:_,onClose:P}=(0,c.j)(),{isOpen:k,onOpen:D,onClose:E}=(0,c.j)(),{isOpen:O,onOpen:U,onClose:Z}=(0,c.j)(),[S,z]=(0,n.useState)(null),[A,R]=(0,n.useState)([]),[q,B]=(0,n.useState)(null),[Y,F]=(0,n.useState)(!0),[L,V]=(0,n.useState)(null),[X,G]=(0,n.useState)(null),[H,J]=(0,n.useState)(!1),[K,M]=(0,n.useState)(!1),[Q,W]=(0,n.useState)([]),[$,ee]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{if(!s||"string"!=typeof s)return;let[e,l]=await Promise.all([(0,y.yn)(s),(0,y.BT)(s)]);z(e),R(l),V(null)}catch(e){console.error("Error fetching data:",e),V("Error loading collection data")}finally{F(!1)}})()},[s]);let es=async()=>{try{if(!s||"string"!=typeof s)return;J(!0),await (0,y.Rx)(s),e.push("/rag")}catch(e){console.error("Error deleting collection:",e),V("Error deleting collection"),C()}finally{J(!1)}},el=async e=>{try{if(!s||"string"!=typeof s)return;M(!0),V(null),await (0,y.rw)(s,Array.from(e)),G("Documents added successfully");let[l,a]=await Promise.all([(0,y.yn)(s),(0,y.BT)(s)]);z(l),R(a),V(null),P(),W([])}catch(e){console.error("Error adding documents:",e),V("Error adding documents"),G(null)}finally{M(!1)}};return Y?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[200px]",children:(0,a.jsx)(r.o,{})}):S?(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[L&&(0,a.jsx)(t.Z,{className:"bg-danger-50",children:(0,a.jsx)(d.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.In,{icon:"solar:danger-circle-bold",className:"text-danger",width:20}),(0,a.jsx)("p",{className:"text-danger",children:L})]})})}),X&&(0,a.jsx)(t.Z,{className:"bg-success-50",children:(0,a.jsx)(d.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.In,{icon:"solar:check-circle-bold",className:"text-success",width:20}),(0,a.jsx)("p",{className:"text-success",children:X})]})})}),(0,a.jsx)(t.Z,{className:"shadow-small",children:(0,a.jsx)(d.U,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h4",{className:"text-xl font-bold",children:S.name}),S.description&&(0,a.jsx)("p",{className:"text-default-500",children:S.description})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.T,{color:"primary",variant:"flat",startContent:(0,a.jsx)(v.In,{icon:"solar:upload-linear",width:20}),isLoading:K,onPress:_,children:"Add Documents"}),(0,a.jsx)(o.T,{color:"primary",startContent:(0,a.jsx)(v.In,{icon:"solar:chart-2-linear",width:20}),onPress:()=>e.push("/rag/indices/new?collection=".concat(s)),children:"Create Vector Index"}),(0,a.jsx)(o.T,{color:"danger",variant:"light",startContent:(0,a.jsx)(v.In,{icon:"solar:trash-bin-trash-linear",width:20}),onPress:i,children:"Delete"})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(x.R,{variant:"flat",size:"sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.In,{icon:"solar:documents-linear",width:16}),(0,a.jsxs)("span",{children:[S.document_count," Documents"]})]})}),(0,a.jsx)(x.R,{variant:"flat",size:"sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.In,{icon:"solar:layers-linear",width:16}),(0,a.jsxs)("span",{children:[S.chunk_count," Chunks"]})]})}),(0,a.jsx)(x.R,{color:"ready"===S.status?"success":"failed"===S.status?"danger":"warning",variant:"flat",size:"sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.In,{icon:"ready"===S.status?"solar:check-circle-linear":"failed"===S.status?"solar:danger-circle-linear":"solar:clock-circle-linear",width:16}),(0,a.jsx)("span",{className:"capitalize",children:S.status})]})})]}),(0,a.jsx)(h.y,{}),0===A.length?(0,a.jsx)(t.Z,{className:"bg-default-50",children:(0,a.jsx)(d.U,{className:"py-12",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(v.In,{icon:"solar:documents-minimalistic-linear",width:48,className:"text-default-400"}),(0,a.jsx)("p",{className:"text-default-500",children:"No documents in this collection yet"}),(0,a.jsx)(o.T,{color:"primary",variant:"flat",startContent:(0,a.jsx)(v.In,{icon:"solar:upload-linear",width:20}),isLoading:K,onPress:_,children:"Add Your First Document"})]})})}):(0,a.jsx)(m.D,{className:"p-0 gap-2 flex flex-col",variant:"shadow",itemClasses:{base:"bg-default-50 dark:bg-default-100",title:"font-normal text-medium",trigger:"px-4 py-0 data-[hover=true]:bg-default-100 rounded-lg h-14 flex items-center",indicator:"text-medium",content:"text-small px-2"},children:A.map(e=>{var s,l;return(0,a.jsx)(j.R,{"aria-label":"Document ".concat((null===(s=e.metadata)||void 0===s?void 0:s.source_id)||e.id),title:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(v.In,{icon:"solar:document-linear",width:20,className:"text-default-500"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(l=e.metadata)||void 0===l?void 0:l.source_id)||e.id})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(o.T,{size:"sm",variant:"flat",color:"primary",startContent:(0,a.jsx)(v.In,{icon:"solar:eye-linear",width:16}),onPress:()=>{B(e),D()},children:"View Document"}),(0,a.jsx)(x.R,{size:"sm",variant:"flat",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.In,{icon:"solar:layers-minimalistic-linear",width:14}),(0,a.jsxs)("span",{children:[e.chunks.length," chunks"]})]})})]})]}),children:(0,a.jsx)("div",{className:"flex flex-col gap-4 p-2",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.chunks.map(e=>(0,a.jsx)(I,{text:e.text,onViewFull:()=>{ee(e),U()}},e.id))})})},e.id)})}),S.error_message&&(0,a.jsx)(t.Z,{className:"bg-danger-50",children:(0,a.jsx)(d.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.In,{icon:"solar:danger-triangle-linear",className:"text-danger",width:20}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h6",{className:"text-medium font-semibold text-danger",children:"Error"}),(0,a.jsx)("p",{className:"text-danger-600",children:S.error_message})]})]})})})]})})}),(0,a.jsx)(u.Y,{isOpen:l,onClose:C,children:(0,a.jsxs)(g.g,{children:[(0,a.jsxs)(p.c,{className:"flex gap-2 items-center",children:[(0,a.jsx)(v.In,{icon:"solar:danger-triangle-bold",className:"text-danger",width:24}),"Delete Collection"]}),(0,a.jsx)(f.h,{children:(0,a.jsx)("p",{children:"Are you sure you want to delete this collection? This action cannot be undone."})}),(0,a.jsxs)(N.q,{children:[(0,a.jsx)(o.T,{variant:"flat",onPress:C,children:"Cancel"}),(0,a.jsx)(o.T,{color:"danger",startContent:(0,a.jsx)(v.In,{icon:"solar:trash-bin-trash-bold",width:20}),isLoading:H,onPress:es,children:"Delete"})]})]})}),(0,a.jsx)(u.Y,{isOpen:T,onClose:P,size:"4xl",scrollBehavior:"inside",children:(0,a.jsxs)(g.g,{children:[(0,a.jsxs)(p.c,{className:"flex gap-2 items-center",children:[(0,a.jsx)(v.In,{icon:"solar:upload-linear",width:24}),"Add Documents"]}),(0,a.jsx)(f.h,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h6",{className:"text-medium font-semibold",children:"Upload Documents"}),(0,a.jsx)("p",{className:"text-small text-default-500",children:"Select documents to add to your collection. The documents will be processed using the collection's existing configuration."})]}),(0,a.jsx)(b.A,{onFilesChange:W})]}),L&&(0,a.jsx)(t.Z,{className:"bg-danger-50",children:(0,a.jsx)(d.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.In,{icon:"solar:danger-circle-bold",className:"text-danger",width:20}),(0,a.jsx)("p",{className:"text-danger",children:L})]})})}),X&&(0,a.jsx)(t.Z,{className:"bg-success-50",children:(0,a.jsx)(d.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.In,{icon:"solar:check-circle-bold",className:"text-success",width:20}),(0,a.jsx)("p",{className:"text-success",children:X})]})})})]})}),(0,a.jsxs)(N.q,{children:[(0,a.jsx)(o.T,{variant:"flat",onPress:P,children:"Cancel"}),(0,a.jsx)(o.T,{color:"primary",startContent:(0,a.jsx)(v.In,{icon:"solar:upload-linear",width:20}),isLoading:K,isDisabled:0===Q.length,onPress:()=>el(Q),children:"Add Documents"})]})]})}),(0,a.jsx)(u.Y,{isOpen:k,onClose:E,size:"4xl",scrollBehavior:"inside",children:(0,a.jsxs)(g.g,{children:[(0,a.jsxs)(p.c,{className:"flex gap-2 items-center",children:[(0,a.jsx)(v.In,{icon:"solar:document-text-linear",width:24}),"Document Text"]}),(0,a.jsx)(f.h,{children:(0,a.jsx)(t.Z,{children:(0,a.jsx)(d.U,{children:(0,a.jsx)("p",{className:"whitespace-pre-wrap text-small",children:null==q?void 0:q.text})})})}),(0,a.jsx)(N.q,{children:(0,a.jsx)(o.T,{onPress:E,startContent:(0,a.jsx)(v.In,{icon:"solar:close-circle-linear",width:20}),children:"Close"})})]})}),(0,a.jsx)(u.Y,{isOpen:O,onClose:Z,size:"4xl",scrollBehavior:"inside",children:(0,a.jsxs)(g.g,{children:[(0,a.jsxs)(p.c,{className:"flex gap-2 items-center",children:[(0,a.jsx)(v.In,{icon:"solar:layers-minimalistic-linear",width:24}),"Chunk Text"]}),(0,a.jsx)(f.h,{children:(0,a.jsx)(t.Z,{children:(0,a.jsx)(d.U,{children:(0,a.jsx)("p",{className:"whitespace-pre-wrap text-small",children:null==$?void 0:$.text})})})}),(0,a.jsx)(N.q,{children:(0,a.jsx)(o.T,{onPress:Z,startContent:(0,a.jsx)(v.In,{icon:"solar:close-circle-linear",width:20}),children:"Close"})})]})})]}):(0,a.jsx)(t.Z,{className:"bg-danger-50",children:(0,a.jsx)(d.U,{children:(0,a.jsx)("p",{className:"text-danger",children:"Collection not found"})})})},_=()=>(0,a.jsxs)("div",{className:"App relative",children:[(0,a.jsx)(i.A,{activePage:"rag"}),(0,a.jsx)("div",{className:"p-6 pt-4",children:(0,a.jsx)(T,{})})]})}},e=>{var s=s=>e(e.s=s);e.O(0,[5352,6361,2377,5892,9235,9177,3010,636,6593,8792],()=>s(68220)),_N_E=e.O()}]);