"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9501],{69501:(e,t,r)=>{r.d(t,{A:()=>h});var s=r(37876),a=r(98594),o=r(14232),i=r(65245);r(47758);var n=r(99615),c=r(44344),l=r(91643);let d=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t).toString(36)},h=e=>{let{output:t,maxHeight:r="500px"}=e,[h,m]=(0,o.useState)(null),p=async(e,t)=>{try{await navigator.clipboard.writeText("string"==typeof e?e:JSON.stringify(e,null,2)),m(t),setTimeout(()=>m(null),2e3)}catch(e){console.error("Failed to copy:",e)}},g=e=>{let t=0,r=0,s=0,a=0;e.match(/^(from|import)\s+[\w.]+(\s+import\s+[\w.]+)?$/m)&&(t+=3),e.match(/def\s+\w+\s*\([^)]*\)\s*:/)&&(t+=3),e.match(/class\s+\w+(\s*\([^)]*\))?\s*:/)&&(t+=3),e.match(/^\s*@\w+/m)&&(t+=2),e.match(/^\s*if\s+__name__\s*==\s*['"]__main__['"]/m)&&(t+=3),e.match(/#include\s*<[^>]+>/)&&(r+=3),e.match(/\b(std::|\bvector<|template\s*<)/)&&(r+=3),e.match(/\b(public|private|protected):/)&&(r+=2),e.match(/\b(int|void|bool|char|double|float|long)\s+\w+\s*\([^)]*\)\s*{/)&&(r+=3),e.match(/interface\s+\w+\s*{/)&&(s+=3),e.match(/type\s+\w+\s*=\s*{/)&&(s+=3),e.match(/([\w\s,]+):\s*(string|number|boolean|any)\b/)&&(s+=2),e.match(/import\s*{\s*[\w\s,]+\s*}\s*from/)&&(s+=2),e.match(/const\s+\w+\s*=\s*require\(/)&&(a+=3),e.match(/module\.exports\s*=/)&&(a+=3),e.match(/function\s*\w+\s*\([^)]*\)\s*{/)&&(a+=2),e.match(/new\s+Promise\s*\(/)&&(a+=2);let o=[{lang:"python",score:t},{lang:"cpp",score:r},{lang:"typescript",score:s},{lang:"javascript",score:a}],i=Math.max(...o.map(e=>e.score));return i>=3?o.find(e=>e.score===i).lang:""},u=e=>{if("string"!=typeof e||!e.includes("\n"))return!1;if(e.trim().startsWith("{")&&e.trim().endsWith("}"))try{return JSON.parse(e),!0}catch(e){}let t=0;return e.match(/^(import|from)\s+[\w.]+(\s+import\s+[\w.]+)?$/m)&&(t+=3),e.match(/^(class|def|function)\s+\w+\s*[\({]/m)&&(t+=3),e.match(/#include\s*<[^>]+>/)&&(t+=3),e.match(/\b(public|private|protected):/)&&(t+=3),e.match(/^interface\s+\w+\s*{/m)&&(t+=3),e.match(/^type\s+\w+\s*=/m)&&(t+=3),e.match(/^(const|let|var)\s+\w+\s*=/m)&&(t+=2),e.match(/=>\s*{/)&&(t+=2),e.match(/^export\s+(default\s+)?/m)&&(t+=2),e.match(/^@\w+/m)&&(t+=2),t>0&&(e.includes(";")&&(t+=1),e.match(/[{}\[\]()]/g)&&(t+=1),e.match(/^\s*\/\//m)&&(t+=1),e.match(/^\s*return\s+/m)&&(t+=1)),![/^[\s-]*Dear\s+\w+/i,/^(Hi|Hello|Hey)\s+\w+/i,/^[\s-]*Chapter\s+\d+/i,/^\d+\.\s+[\w\s]+$/m,/^[A-Z][^.!?]+[.!?]\s*$/m].some(t=>t.test(e))&&t>=3},x=e=>(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(i.Ay,{src:e})}),y=e=>{if("string"==typeof e)try{let t=JSON.parse(e);if("model_provider_error"===t.type){let e={overloaded:{icon:"solar:server-path-broken-linear",color:"warning"},rate_limit:{icon:"solar:clock-circle-linear",color:"warning"},context_length:{icon:"solar:document-broken-linear",color:"danger"},auth:{icon:"solar:key-linear",color:"danger"},service_unavailable:{icon:"solar:server-linear",color:"warning"},unknown:{icon:"solar:danger-triangle-linear",color:"danger"}},r=e[t.error_type]||e.unknown,o="warning"===r.color?"warning":"danger";return(0,s.jsxs)("div",{className:"p-4 bg-".concat(o,"-50 border border-").concat(o,"-200 rounded-lg"),children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(a.In,{icon:r.icon,className:"text-".concat(o,"-500 mr-2"),width:24}),(0,s.jsxs)("span",{className:"font-semibold text-".concat(o,"-700"),children:[t.provider.toUpperCase()," Model Error"]})]}),(0,s.jsx)("p",{className:"text-".concat(o,"-700"),children:t.message})]})}}catch(e){}if("object"==typeof e&&null!==e)return x(e);if("string"==typeof e)try{let t=JSON.parse(e);if("object"==typeof t&&null!==t)return x(t)}catch(e){}if(u(e)){let t=g(e),r="code-".concat(d(e));return(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)(c.A,{language:t,style:l.oneDark,customStyle:{borderRadius:"8px",padding:"12px"},children:e}),(0,s.jsx)("div",{className:"flex justify-end mt-3",children:(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),p(e,r)},className:"px-3 py-1.5 rounded-md bg-white/10 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all flex items-center gap-2 border border-gray-200 dark:border-gray-700/50 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",title:"Copy to clipboard",children:(0,s.jsx)(a.In,{icon:h===r?"solar:check-circle-bold":"solar:copy-linear",className:h===r?"text-green-500 dark:text-green-400":"text-gray-500 dark:text-gray-400",width:16})})})]})}if("string"==typeof e&&e.startsWith("data:")){let[t,a]=e.split(","),o=t.split(";")[0].split(":")[1];if("application/pdf"===o)return(0,s.jsx)("iframe",{src:e,style:{width:"100%",height:"500px",border:"none"},title:"PDF Preview"});if(o.startsWith("image/"))return(0,s.jsx)("img",{src:e,alt:"Image Preview",style:{maxWidth:"100%",maxHeight:r}});if(o.startsWith("video/"))return(0,s.jsxs)("video",{controls:!0,style:{maxWidth:"100%",maxHeight:r},children:[(0,s.jsx)("source",{src:e,type:o}),"Your browser does not support the video tag."]});if(o.startsWith("audio/"))return(0,s.jsxs)("audio",{controls:!0,style:{width:"100%"},children:[(0,s.jsx)("source",{src:e,type:o}),"Your browser does not support the audio tag."]});if(o.startsWith("text/"))try{let e=atob(a);if(u(e)){let t=g(e);return(0,s.jsx)(c.A,{language:t,style:l.oneDark,customStyle:{margin:0,borderRadius:"8px",padding:"12px"},children:e})}return(0,s.jsx)(n.o,{children:e})}catch(e){return console.error("Error decoding base64:",e),(0,s.jsx)("div",{children:"Error decoding content"})}return(0,s.jsx)("div",{children:"Unsupported data URI format"})}if("string"==typeof e&&(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("test_files/")||e.startsWith("run_files/"))){(e.startsWith("test_files/")||e.startsWith("run_files/"))&&(e=window.location.origin+"/api/files/"+e);let t=(e.split(".").pop()||"").toLowerCase();return"pdf"===t?(0,s.jsx)("iframe",{src:e,style:{width:"100%",height:"500px",border:"none"},title:"PDF Preview"}):["png","jpg","jpeg","gif","webp","svg"].includes(t)?(0,s.jsx)("img",{src:e,alt:"Image Preview",style:{maxWidth:"100%",maxHeight:r}}):["mp4","webm","ogg","ogv"].includes(t)?(0,s.jsxs)("video",{controls:!0,style:{maxWidth:"100%",maxHeight:r},children:[(0,s.jsx)("source",{src:e}),"Your browser does not support the video tag."]}):["mp3","wav","ogg"].includes(t)?(0,s.jsxs)("audio",{controls:!0,style:{width:"100%"},children:[(0,s.jsx)("source",{src:e}),"Your browser does not support the audio tag."]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("iframe",{src:e,style:{width:"100%",height:"auto",border:"none",display:"none"},sandbox:"allow-scripts allow-same-origin allow-popups",onLoad:e=>{e.currentTarget.style.display="block"},onError:e=>{e.currentTarget.style.display="none"}}),(0,s.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})]})}let t=e=>"string"==typeof e?e.match(/^#+\s/m)?e:e.match(/^[A-Z][^a-z:]+(?:\s[A-Z][^a-z:]+)*:?$/)?"### ".concat(e):e:"object"==typeof e&&null!==e?Object.entries(e).map(e=>{let[r,s]=e;return r.match(/^[A-Z][^a-z:]+(?:\s[A-Z][^a-z:]+)*:?$/)?"## ".concat(r,"\n\n").concat(t(s)):"**".concat(r,"**: ").concat(t(s))}).join("\n\n"):String(e),o=t(e),i="text-".concat(d(o));return(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)(n.o,{children:o}),(0,s.jsx)("div",{className:"flex justify-end mt-3",children:(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),p(o,i)},className:"px-3 py-1.5 rounded-md bg-white/10 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all flex items-center gap-2 border border-gray-200 dark:border-gray-700/50 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",title:"Copy to clipboard",children:(0,s.jsx)(a.In,{icon:h===i?"solar:check-circle-bold":"solar:copy-linear",className:h===i?"text-green-500 dark:text-green-400":"text-gray-500 dark:text-gray-400",width:16})})})]})};return(0,s.jsx)(s.Fragment,{children:t&&(0,s.jsx)("div",{className:"p-5",style:{overflowY:"auto",touchAction:"none",maxHeight:r},onWheelCapture:e=>{e.stopPropagation()},children:(0,s.jsx)("div",{children:Object.entries(t).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"my-2 flex flex-col items-start",children:[(0,s.jsxs)("label",{className:"text-sm font-semibold mb-1 block",children:[t,":"]}),(0,s.jsx)("div",{className:"ml-2 mt-auto w-full",children:y(r)})]},t)})})})})}}}]);