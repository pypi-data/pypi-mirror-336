(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8467],{498:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(11713).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3624:(e,s,a)=>{"use strict";a.d(s,{P:()=>m});var t=a(43821),l=a(3013),i=a(42288),n=a(28227),r=a(78769),d=a(9679),c=a(35903);let o=(0,d.C)({...l.W,...n.n,...i.$,...r.Z},c.J),m=(0,t.I)(o)},4622:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(11713).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},17111:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>S});var t=a(37876),l=a(93010),i=a(3576),n=a(62701),r=a(21505),d=a(33566),c=a(91507),o=a(9941),m=a(41260),u=a(58170),x=a(22196),h=a(95035),f=a(33810),v=a(33949),g=a(75922),p=a(68509),b=a(3624),j=a(27212),y=a(78572),N=a(498),w=a(22885),_=a(4622),C=a(89099),k=a(14232),A=a(7700);let E=[{title:"Select Collection",description:"Choose a document collection to create an index from",isCompleted:!1},{title:"Configure Embeddings",description:"Configure embedding model and vector store settings",isCompleted:!1},{title:"Create Index",description:"Review and create your vector index",isCompleted:!1}],I=()=>{let e=["Smart","Brilliant","Dynamic","Quantum","Neural","Cosmic","Intelligent","Advanced","Strategic","Innovative"],s=["Atlas","Nexus","Matrix","Archive","Library","Vault","Repository","Database","Collection","Hub"],a=e[Math.floor(Math.random()*e.length)],t=s[Math.floor(Math.random()*s.length)],l=new Date,i="".concat(l.toLocaleDateString()," ").concat(l.toLocaleTimeString());return"".concat(a," ").concat(t," - ").concat(i)},P=()=>{let e=(0,C.useRouter)(),[s,a]=(0,k.useState)(0),[l,P]=(0,k.useState)(!1),[S,D]=(0,k.useState)([]),[M,T]=(0,k.useState)({}),[L,O]=(0,k.useState)({}),[q,K]=(0,k.useState)({}),[R,V]=(0,k.useState)(!0),[z,B]=(0,k.useState)(!0),[$,H]=(0,k.useState)(null),[U,X]=(0,k.useState)({name:"",description:"",collection_id:"",embedding_model:"",vector_db:"",search_strategy:"vector"}),[W,Z]=(0,k.useState)(null);(0,k.useEffect)(()=>{let e=async()=>{try{let e=await (0,A.d5)(),s={};for(let a of e){let e=await (0,A.CG)(a);e.value&&(s[a]=e.value)}K(s)}catch(e){console.error("Error loading API keys:",e)}};(async()=>{try{let[e,s]=await Promise.all([(0,A.q$)(),(0,A.Em)()]);T(e),O(s)}catch(e){console.error("Error loading data:",e)}finally{V(!1),B(!1)}})(),e()},[]),(0,k.useEffect)(()=>{(async()=>{try{let[e,s,a]=await Promise.all([(0,A.Xn)(),(0,A.q$)(),(0,A.Em)()]);D(e),T(s),O(a)}catch(e){console.error("Error fetching data:",e),H({type:"danger",message:"Error loading configuration options"})}})()},[]),(0,k.useEffect)(()=>{if($){let e=setTimeout(()=>{H(null)},3e3);return()=>clearTimeout(e)}},[$]),(0,k.useEffect)(()=>{if(W){let e=setTimeout(()=>{Z(null)},3e3);return()=>clearTimeout(e)}},[W]);let F=async()=>{try{P(!0);let s={name:U.name,description:U.description,collection_id:U.collection_id,embedding:{model:U.embedding_model,vector_db:U.vector_db,search_strategy:U.search_strategy,semantic_weight:1,keyword_weight:0,top_k:3,score_threshold:.7}},a=await (0,A.gM)(s);H({type:"success",message:"Vector index created successfully"}),e.push("/rag/indices/".concat(a.id))}catch(e){console.error("Error creating index:",e),H({type:"danger",message:"Error creating vector index"})}finally{P(!1)}},Q=e=>s=>{let a=s.target.value;X(s=>(0,n._)((0,i._)({},s),{[e]:a}))},G=e=>{let{modelInfo:s,storeInfo:a}=e,l=[],i="";if(s)s.required_env_vars.forEach(e=>{q[e]&&""!==q[e]||l.push(e)}),i=s.name;else{if(!a)return null;a.required_env_vars.forEach(e=>{q[e]&&""!==q[e]||l.push(e)}),i=a.name}return l.length>0?(0,t.jsx)(r.B,{className:"mt-2",color:"warning",title:"Missing Configuration for ".concat(i),children:1===l.length?"Please set the ".concat(l[0]," in Settings > API Keys before using this service."):"Please set the following in Settings > API Keys before using this service: ".concat(l.join(", "))}):null},J=()=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.d,{placeholder:"Select embedding model",selectedKeys:[U.embedding_model],onChange:e=>Q("embedding_model")(e),isLoading:R,classNames:{trigger:"h-12"},children:Object.entries(Object.entries(M).reduce((e,s)=>{let[a,t]=s,l=t.provider||"Other";return e[l]||(e[l]=[]),e[l].push((0,n._)((0,i._)({},t),{id:a})),e},{})).map((e,s,a)=>{let[l,i]=e;return(0,t.jsx)(c.K,{title:l,showDivider:s<a.length-1,children:i.map(e=>(0,t.jsx)(o.y,{value:e.id,textValue:e.name,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsxs)("span",{className:"text-tiny text-default-400",children:[e.dimensions," dimensions"]})]})},e.id))},l)})}),U.embedding_model&&(0,t.jsx)(G,{modelInfo:M[U.embedding_model]})]}),Y=()=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.d,{placeholder:"Select vector database",selectedKeys:[U.vector_db],onChange:e=>Q("vector_db")(e),isLoading:z,classNames:{trigger:"h-12"},children:Object.entries(L).map(e=>{let[s,a]=e;return(0,t.jsx)(o.y,{value:s,textValue:a.name,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:a.name}),(0,t.jsx)("span",{className:"text-tiny text-default-400",children:a.description})]})},s)})}),U.vector_db&&(0,t.jsx)(G,{storeInfo:L[U.vector_db]})]});return(0,t.jsx)("div",{className:"max-w-[1200px] mx-auto p-6 min-h-screen bg-gradient-to-b from-background to-default-50/50",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,t.jsx)("div",{className:"w-full md:w-1/3 lg:w-1/4",children:(0,t.jsxs)(b.P.div,{className:"sticky top-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsxs)("div",{className:"flex flex-col max-w-fit mb-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-default-900",children:"Create Vector Index"}),(0,t.jsx)("p",{className:"text-small text-default-400",children:"Follow the steps to configure your vector index settings."})]}),(0,t.jsx)(g.o,{classNames:{base:"mb-4",track:"drop-shadow-md",indicator:"bg-gradient-to-r from-primary to-primary-500",label:"text-sm font-medium",value:"text-sm font-medium text-default-500"},label:"Progress",size:"md",value:s/(E.length-1)*100,showValueLabel:!0,valueLabel:"".concat(s+1," of ").concat(E.length)}),(0,t.jsx)(j.N,{children:W&&(0,t.jsx)(b.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,t.jsx)(r.B,{className:"mb-4",color:"primary",startContent:(0,t.jsx)(y.A,{className:"h-4 w-4"}),children:W})})}),(0,t.jsx)(j.N,{children:$&&(0,t.jsx)(b.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,t.jsx)(r.B,{className:"mb-4",color:$.type,startContent:"success"===$.type?(0,t.jsx)(N.A,{className:"h-4 w-4"}):(0,t.jsx)(y.A,{className:"h-4 w-4"}),children:$.message})})}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:E.map((e,l)=>(0,t.jsx)(b.P.button,{onClick:()=>a(l),className:"flex flex-col gap-1 rounded-xl border-1 p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg\n                    ".concat(s===l?"border-primary bg-primary/5 shadow-md":l<s?"border-success/50 bg-success/5":"border-default-200 dark:border-default-100"),disabled:l>s,whileHover:{scale:l<=s?1.02:1},whileTap:{scale:.98},children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium transition-colors duration-300\n                        ".concat(s===l?"bg-primary text-white shadow-md":l<s?"bg-success text-white":"bg-default-100 text-default-600"),children:l<s?"âœ“":l+1}),(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsx)("span",{className:"font-semibold text-default-900",children:e.title}),(0,t.jsx)("span",{className:"text-xs text-default-400",children:e.description})]})]})},l))})]})}),(0,t.jsx)(b.P.div,{className:"flex-1",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:(0,t.jsx)(f.Z,{className:"bg-background/60 dark:bg-background/60 backdrop-blur-lg backdrop-saturate-150 shadow-xl border-1 border-default-200",children:(0,t.jsxs)(v.U,{className:"gap-8 p-8",children:[(e=>{switch(e){case 0:return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(d.d,{label:"Document Collection",placeholder:"Select a document collection",selectedKeys:U.collection_id?[U.collection_id]:[],onChange:e=>Q("collection_id")(e),isRequired:!0,children:S.map(e=>(0,t.jsx)(o.y,{value:e.id,children:e.name},e.id))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(m.r,{label:"Index Name",placeholder:"Optional - Enter a name or leave empty for a random name",value:U.name,onChange:Q("name"),className:"w-full",endContent:(0,t.jsx)(u.I,{content:"Leave empty for a randomly generated name",children:(0,t.jsx)(y.A,{className:"w-4 h-4 text-default-400"})})}),(0,t.jsx)(x.T,{isIconOnly:!0,variant:"flat",className:"self-end h-14",onPress:()=>Q("name")({target:{value:I()}}),children:"\uD83C\uDFB2"})]}),(0,t.jsx)(h.P,{label:"Description",value:U.description,onChange:Q("description"),minRows:3,endContent:(0,t.jsx)(u.I,{content:"Optional description of your vector index",children:(0,t.jsx)(y.A,{className:"w-4 h-4 text-default-400"})})})]})});case 1:return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Configure Index"}),(0,t.jsx)(u.I,{content:"Configure your vector index settings",children:(0,t.jsx)(y.A,{className:"w-4 h-4 text-default-400"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Embedding Model"}),(0,t.jsx)(u.I,{content:"Configure how your text will be converted to vector embeddings",children:(0,t.jsx)(y.A,{className:"w-4 h-4 text-default-400"})})]}),J()]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Vector Database"}),(0,t.jsx)(u.I,{content:"Choose where your vector embeddings will be stored",children:(0,t.jsx)(y.A,{className:"w-4 h-4 text-default-400"})})]}),Y()]})]})]});case 2:var s,a;let l=S.find(e=>e.id===U.collection_id);return(0,t.jsx)(f.Z,{children:(0,t.jsxs)(v.U,{className:"gap-4",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:"Review Configuration"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Collection:"}),(0,t.jsx)("div",{className:"text-default-500",children:(null==l?void 0:l.name)||U.collection_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Index Name:"}),(0,t.jsx)("div",{className:"text-default-500",children:U.name})]}),U.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Description:"}),(0,t.jsx)("div",{className:"text-default-500",children:U.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Embedding Model:"}),(0,t.jsx)("div",{className:"text-default-500",children:(null===(s=M[U.embedding_model])||void 0===s?void 0:s.name)||U.embedding_model})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Vector Database:"}),(0,t.jsx)("div",{className:"text-default-500",children:(null===(a=L[U.vector_db])||void 0===a?void 0:a.name)||U.vector_db})]})]})]})]})});default:return null}})(s),(0,t.jsx)(p.y,{className:"my-4"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(x.T,{color:"danger",variant:"light",onPress:()=>e.back(),className:"font-medium hover:bg-danger/10",children:"Cancel"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[s>0&&(0,t.jsx)(x.T,{variant:"bordered",onPress:()=>{a(e=>e-1)},className:"font-medium",startContent:(0,t.jsx)(w.A,{size:18}),isDisabled:l,children:"Back"}),(0,t.jsx)(x.T,{color:"primary",onPress:s===E.length-1?F:()=>{if(s<E.length-1){if(0===s&&!U.name.trim()){let e=I();X(s=>(0,n._)((0,i._)({},s),{name:e})),Z("Using generated name: ".concat(e))}a(e=>e+1)}else F()},className:"font-medium",endContent:s!==E.length-1&&(0,t.jsx)(_.A,{size:18}),isLoading:l,isDisabled:0===s&&!U.collection_id||1===s&&(!U.embedding_model||!U.vector_db),children:s===E.length-1?"Create Index":"Next"})]})]})]})})})]})})};function S(){return(0,t.jsxs)("div",{className:"App relative",children:[(0,t.jsx)(l.A,{activePage:"rag"}),(0,t.jsx)(P,{})]})}},22226:(e,s,a)=>{"use strict";a.d(s,{w:()=>i});var t=a(14232);function l(e){return null}l.getCollectionNode=function*(e){let{children:s,title:a,items:l}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:a,"aria-label":e["aria-label"],*childNodes(){if("function"==typeof s){if(!l)throw Error("props.children was a function but props.items is missing");for(let e of l)yield{type:"item",value:e,renderer:s}}else{let e=[];t.Children.forEach(s,s=>{e.push({type:"item",element:s})}),yield*e}}}};let i=l},22885:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(11713).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},74944:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/rag/indices/new",function(){return a(17111)}])},75922:(e,s,a)=>{"use strict";a.d(s,{o:()=>g});var t=a(87480),l=a(34837),i=a(61584),n=a(13605),r=a(8871),d=a(40812),c=a(63357),o=a(38591),m=a(95264),u=a(14232),x=a(2597),h=a(9031),f=a(37876),v=(0,l.Rf)((e,s)=>{let{Component:a,slots:v,classNames:g,label:p,percentage:b,showValueLabel:j,getProgressBarProps:y,getLabelProps:N}=function(e){var s,a;let f=(0,t.o)(),[v,g]=(0,l.rE)(e,i.q.variantKeys),{ref:p,as:b,id:j,className:y,classNames:N,label:w,valueLabel:_,value:C=0,minValue:k=0,maxValue:A=100,showValueLabel:E=!1,formatOptions:I={style:"percent"},...P}=v,S=(0,n.zD)(p),D=(0,r.$)(null==N?void 0:N.base,y),[,M]=(0,x.a)({rerender:!0,delay:100}),T=e.isIndeterminate,L=null!=(a=null!=(s=e.disableAnimation)?s:null==f?void 0:f.disableAnimation)&&a,{progressBarProps:O,labelProps:q}=(0,h.E)({id:j,label:w,value:C,minValue:k,maxValue:A,valueLabel:_,formatOptions:I,isIndeterminate:T,"aria-labelledby":e["aria-labelledby"],"aria-label":e["aria-label"]}),K=(0,u.useMemo)(()=>(0,i.q)({...g,disableAnimation:L}),[(0,d.t6)(g),L]),R=!!L||M,V=(0,u.useMemo)(()=>T||!R?void 0:(0,c.QN)((C-k)/(A-k)*100),[R,T,C,k,A]),z=(0,u.useCallback)((s={})=>({ref:S,"data-indeterminate":(0,o.sE)(T),"data-disabled":(0,o.sE)(e.isDisabled),className:K.base({class:D}),...(0,m.v)(O,P,s)}),[S,K,T,e.isDisabled,D,O,P]),B=(0,u.useCallback)((e={})=>({className:K.label({class:null==N?void 0:N.label}),...(0,m.v)(q,e)}),[K,N,q]);return{Component:b||"div",domRef:S,slots:K,classNames:N,label:w,percentage:V,showValueLabel:E,getProgressBarProps:z,getLabelProps:B}}({...e,ref:s}),w=y(),_=p||j;return(0,f.jsxs)(a,{...w,children:[_?(0,f.jsxs)("div",{className:v.labelWrapper({class:null==g?void 0:g.labelWrapper}),children:[p&&(0,f.jsx)("span",{...N(),children:p}),j&&(0,f.jsx)("span",{className:v.value({class:null==g?void 0:g.value}),children:w["aria-valuetext"]})]}):null,(0,f.jsx)("div",{className:v.track({class:null==g?void 0:g.track}),children:(0,f.jsx)("div",{className:v.indicator({class:null==g?void 0:g.indicator}),style:{transform:`translateX(-${100-(b||0)}%)`}})})]})});v.displayName="HeroUI.Progress";var g=v},78572:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(11713).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},91507:(e,s,a)=>{"use strict";a.d(s,{K:()=>t});var t=a(22226).w}},e=>{var s=s=>e(e.s=s);e.O(0,[5352,6361,2377,5892,9235,9177,9217,374,3010,636,6593,8792],()=>s(74944)),_N_E=e.O()}]);