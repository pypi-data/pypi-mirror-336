(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3425],{16975:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>P});var r=l(3576),a=l(62701),i=l(37876),c=l(68625),t=l(22196),n=l(14107),d=l(7305),h=l(30879),x=l(8320),o=l(30397),u=l(27955),m=l(23331),j=l(24094),v=l(37090),_=l(64553),p=l(12503),f=l(1958),w=l(21505),N=l(98594),g=l(89099),b=l(14232),y=l(93010),E=l(7700);let P=()=>{let{id:e}=(0,g.useRouter)().query,[s,l]=(0,b.useState)(null),[P,k]=(0,b.useState)(!0),[R,S]=(0,b.useState)(null),{isOpen:C,onOpen:I,onOpenChange:O}=(0,c.j)(),[T,z]=(0,b.useState)({message:"",color:"default",isVisible:!1}),A=(e,s)=>{z({message:e,color:s,isVisible:!0}),setTimeout(()=>z(e=>(0,a._)((0,r._)({},e),{isVisible:!1})),3e3)};(0,b.useEffect)(()=>{(async()=>{if(e)try{var s,r;let a=await (0,E.eW)(e),i={run_id:a.run_id,eval_name:a.eval_name,accuracy:a.results.accuracy,per_example_results:(null===(r=a.results.subset_metrics)||void 0===r?void 0:null===(s=r.default)||void 0===s?void 0:s.per_example_results)||[]};l(i)}catch(e){console.error("Error fetching eval results:",e),A("Failed to fetch eval results","danger")}finally{k(!1)}})()},[e]);let V=e=>(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"text-sm max-h-32 overflow-y-auto flex-grow",children:(0,i.jsx)("p",{children:e})}),(0,i.jsx)(t.T,{isIconOnly:!0,size:"sm",variant:"light",onClick:s=>{s.stopPropagation(),S(e),I()},children:(0,i.jsx)(N.In,{icon:"solar:full-screen-linear",className:"w-4 h-4"})})]});return P?(0,i.jsxs)("div",{className:"min-h-screen",children:[(0,i.jsx)(y.A,{activePage:"evals"}),(0,i.jsx)("div",{className:"flex justify-center items-center h-[calc(100vh-64px)]",children:(0,i.jsx)(n.o,{size:"lg"})})]}):s&&s.per_example_results?(0,i.jsxs)("div",{className:"min-h-screen",children:[(0,i.jsx)(y.A,{activePage:"evals"}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Eval Run Results"}),(0,i.jsxs)("div",{className:"text-gray-600 mt-2",children:["Run ID: ",s.run_id," â€¢ Eval: ",s.eval_name]})]}),(0,i.jsxs)(d.R,{color:"success",variant:"flat",size:"lg",children:["Accuracy: ",(100*s.accuracy).toFixed(1),"%"]})]}),(0,i.jsxs)(h.j,{"aria-label":"Eval results table",isHeaderSticky:!0,isStriped:!0,fullWidth:!0,children:[(0,i.jsxs)(x.X,{children:[(0,i.jsx)(o.e,{children:"Example ID"}),(0,i.jsx)(o.e,{width:"40%",children:"Prompt"}),(0,i.jsx)(o.e,{children:"Predicted"}),(0,i.jsx)(o.e,{children:"Ground Truth"}),(0,i.jsx)(o.e,{children:"Status"})]}),(0,i.jsx)(u.E,{items:s.per_example_results,children:e=>(0,i.jsxs)(m.s,{children:[(0,i.jsx)(j.w,{children:e.example_id||e.task_id}),(0,i.jsx)(j.w,{children:(0,i.jsx)("div",{className:"max-h-32 overflow-y-auto",children:V(e.prompt)})}),(0,i.jsx)(j.w,{children:e.predicted_answer}),(0,i.jsx)(j.w,{children:e.ground_truth_answer}),(0,i.jsx)(j.w,{children:(0,i.jsx)(d.R,{color:e.is_correct?"success":"danger",variant:"flat",children:e.is_correct?"Correct":"Incorrect"})})]},e.example_id||e.task_id||"result-".concat(e.predicted_answer,"-").concat(e.ground_truth_answer))})]})]}),(0,i.jsx)(v.Y,{isOpen:C,onOpenChange:O,classNames:{base:"max-w-[90%] h-[75vh] m-auto",wrapper:"w-[90%]",body:"p-5"},scrollBehavior:"inside",placement:"center",children:(0,i.jsx)(_.g,{children:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.c,{className:"flex flex-col gap-1",children:"Prompt"}),(0,i.jsx)(f.h,{className:"whitespace-pre-wrap overflow-y-auto",children:R})]})})}),T.isVisible&&(0,i.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,i.jsx)(w.B,{color:T.color,children:T.message})})]}):(0,i.jsxs)("div",{className:"min-h-screen",children:[(0,i.jsx)(y.A,{activePage:"evals"}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Eval Run Results"}),(0,i.jsx)("p",{children:"No results available"})]})]})}},20794:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/evals/[id]",function(){return l(16975)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[5352,6361,2377,5892,9235,9177,3010,636,6593,8792],()=>s(20794)),_N_E=e.O()}]);