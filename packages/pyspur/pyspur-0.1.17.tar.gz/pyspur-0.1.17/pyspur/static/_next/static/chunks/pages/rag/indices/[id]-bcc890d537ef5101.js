(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9018],{27501:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>I});var a=l(37876),n=l(14232),t=l(93010),r=l(3576),i=l(62701),c=l(68625),d=l(14107),o=l(33810),x=l(33949),u=l(22196),m=l(84734),h=l(7305),j=l(68509),p=l(75922),g=l(37090),f=l(64553),v=l(12503),N=l(1958),b=l(73835),y=l(98594),w=l(89099),_=l(7700);let k=()=>{let e=(0,w.useRouter)(),{id:s}=e.query,{isOpen:l,onOpen:t,onClose:k}=(0,c.j)(),[I,E]=(0,n.useState)(null),[P,C]=(0,n.useState)(null),[D,U]=(0,n.useState)(!0),[S,z]=(0,n.useState)(null),[M,T]=(0,n.useState)(!1),[Z,A]=(0,n.useState)(0),[R,q]=(0,n.useState)(null),[F,$]=(0,n.useState)(null),[O,V]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{if(!s||"string"!=typeof s)return;let e=await (0,_.M$)(s);E(e);let l=await (0,_.yn)(e.collection_id);C(l),z(null)}catch(e){console.error("Error fetching index:",e),z("Error loading index details")}finally{U(!1)}})()},[s]),(0,n.useEffect)(()=>{let e;let l=!0,a=async()=>{try{if(!s||"string"!=typeof s||!I)return;if("processing"!==I.status){V(null);return}let a=await (0,_.ww)(s);if(!a){l&&(V("Progress information is not available"),e&&clearInterval(e));return}if(l&&(A(a.progress),q(a.current_step),$(a),V(null),"completed"===a.status||"completed"===a.current_step)){let l=await (0,_.M$)(s);E((0,i._)((0,r._)({},l),{status:"ready"})),A(1),q("completed"),e&&clearInterval(e);return}}catch(s){if(!l)return;console.error("Error fetching progress:",s),V("Unable to fetch progress updates"),e&&clearInterval(e)}};return(null==I?void 0:I.status)==="processing"&&"completed"!==R&&(a(),e=setInterval(a,2e3)),()=>{l=!1,e&&clearInterval(e)}},[s,null==I?void 0:I.status,R]);let X=async()=>{try{if(!s||"string"!=typeof s)return;T(!0),await (0,_.iV)(s),e.push("/rag")}catch(e){console.error("Error deleting index:",e),z("Error deleting index"),k()}finally{T(!1)}};return D?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[200px]",children:(0,a.jsx)(d.o,{})}):I?(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[S&&(0,a.jsx)(o.Z,{className:"bg-danger-50",children:(0,a.jsx)(x.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.In,{icon:"solar:danger-circle-bold",className:"text-danger",width:20}),(0,a.jsx)("p",{className:"text-danger",children:S})]})})}),(0,a.jsx)(o.Z,{className:"shadow-small",children:(0,a.jsx)(x.U,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h4",{className:"text-xl font-bold",children:I.name}),I.description&&(0,a.jsx)("p",{className:"text-default-500",children:I.description})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(u.T,{color:"danger",variant:"light",startContent:(0,a.jsx)(y.In,{icon:"solar:trash-bin-trash-linear",width:20}),onPress:t,children:"Delete"})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-medium mb-2",children:["Collection:"," ",(0,a.jsx)(m.h,{as:"button",onPress:()=>e.push("/rag/collections/".concat(I.collection_id)),className:"text-primary",children:(null==P?void 0:P.name)||I.collection_id})]})}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(h.R,{color:(e=>{switch(e){case"ready":return"success";case"failed":return"danger";default:return"warning"}})(I.status),variant:"flat",size:"sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.In,{icon:(e=>{switch(e){case"ready":return"solar:check-circle-linear";case"failed":return"solar:danger-circle-linear";default:return"solar:clock-circle-linear"}})(I.status),width:16}),(0,a.jsx)("span",{className:"capitalize",children:I.status})]})}),(0,a.jsx)(h.R,{variant:"flat",size:"sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.In,{icon:"solar:documents-linear",width:16}),(0,a.jsxs)("span",{children:[I.document_count," Documents"]})]})}),(0,a.jsx)(h.R,{variant:"flat",size:"sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.In,{icon:"solar:layers-linear",width:16}),(0,a.jsxs)("span",{children:[I.chunk_count," chunks"]})]})})]}),(0,a.jsx)(j.y,{}),"processing"===I.status&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Processing Documents"}),(0,a.jsxs)("span",{className:"text-sm text-default-400",children:[Math.round(100*Z),"%"]})]}),(0,a.jsx)(p.o,{value:Math.round(100*Z),color:"primary",className:"w-full"}),R&&(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-default-500",children:[(0,a.jsxs)("span",{children:["Current step: ",R]}),F&&(0,a.jsxs)("span",{children:[F.processed_chunks," / ",F.total_chunks," chunks"]})]}),O&&(0,a.jsx)("div",{className:"text-sm text-danger mt-2",children:O})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"Documents"}),(0,a.jsxs)("span",{children:[I.document_count," Documents"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"Chunks"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{children:["embedding"===R&&(0,a.jsxs)(a.Fragment,{children:["Processing ",(null==F?void 0:F.processed_chunks)||0," of"," ",(null==F?void 0:F.total_chunks)||I.chunk_count," chunks"]}),"uploading"===R&&(0,a.jsxs)(a.Fragment,{children:["Uploading ",(null==F?void 0:F.processed_chunks)||0," chunks"]}),"completed"===R&&(0,a.jsxs)(a.Fragment,{children:[I.chunk_count," chunks"]}),!R&&(0,a.jsxs)(a.Fragment,{children:[I.chunk_count," chunks"]})]}),("embedding"===R||"uploading"===R)&&!O&&(0,a.jsx)(d.o,{size:"sm"})]})]})]}),!O&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-default-400",children:[(0,a.jsx)(d.o,{size:"sm"}),(0,a.jsxs)("span",{children:["embedding"===R&&"Generating embeddings...","uploading"===R&&"Uploading to vector store...","completed"===R&&"Processing complete",!R&&"Processing your documents..."]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)(o.Z,{children:(0,a.jsx)(x.U,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h6",{className:"text-medium font-semibold",children:"Embedding Model"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.In,{icon:"solar:cpu-linear",width:16,className:"text-default-500"}),(0,a.jsx)("p",{className:"text-default-500",children:I.embedding_model})]})]})})}),(0,a.jsx)(o.Z,{children:(0,a.jsx)(x.U,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h6",{className:"text-medium font-semibold",children:"Vector Database"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.In,{icon:"solar:database-linear",width:16,className:"text-default-500"}),(0,a.jsx)("p",{className:"text-default-500",children:I.vector_db})]})]})})})]}),I.error_message&&(0,a.jsx)(o.Z,{className:"bg-danger-50",children:(0,a.jsx)(x.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.In,{icon:"solar:danger-triangle-linear",className:"text-danger",width:20}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h6",{className:"text-medium font-semibold text-danger",children:"Error"}),(0,a.jsx)("p",{className:"text-danger-600",children:I.error_message})]})]})})})]})})}),(0,a.jsx)(g.Y,{isOpen:l,onClose:k,children:(0,a.jsxs)(f.g,{children:[(0,a.jsxs)(v.c,{className:"flex gap-2 items-center",children:[(0,a.jsx)(y.In,{icon:"solar:danger-triangle-bold",className:"text-danger",width:24}),"Delete Vector Index"]}),(0,a.jsx)(N.h,{children:(0,a.jsx)("p",{children:"Are you sure you want to delete this vector index? This action cannot be undone."})}),(0,a.jsxs)(b.q,{children:[(0,a.jsx)(u.T,{variant:"flat",onPress:k,children:"Cancel"}),(0,a.jsx)(u.T,{color:"danger",startContent:(0,a.jsx)(y.In,{icon:"solar:trash-bin-trash-bold",width:20}),isLoading:M,onPress:X,children:"Delete"})]})]})})]}):(0,a.jsx)(o.Z,{className:"bg-danger-50",children:(0,a.jsx)(x.U,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.In,{icon:"solar:danger-circle-bold",className:"text-danger",width:20}),(0,a.jsx)("p",{className:"text-danger",children:"Index not found"})]})})})},I=()=>(0,a.jsxs)("div",{className:"App relative",children:[(0,a.jsx)(t.A,{activePage:"rag"}),(0,a.jsx)("div",{className:"p-6 pt-4",children:(0,a.jsx)(k,{})})]})},75922:(e,s,l)=>{"use strict";l.d(s,{o:()=>g});var a=l(87480),n=l(34837),t=l(61584),r=l(13605),i=l(8871),c=l(40812),d=l(63357),o=l(38591),x=l(95264),u=l(14232),m=l(2597),h=l(9031),j=l(37876),p=(0,n.Rf)((e,s)=>{let{Component:l,slots:p,classNames:g,label:f,percentage:v,showValueLabel:N,getProgressBarProps:b,getLabelProps:y}=function(e){var s,l;let j=(0,a.o)(),[p,g]=(0,n.rE)(e,t.q.variantKeys),{ref:f,as:v,id:N,className:b,classNames:y,label:w,valueLabel:_,value:k=0,minValue:I=0,maxValue:E=100,showValueLabel:P=!1,formatOptions:C={style:"percent"},...D}=p,U=(0,r.zD)(f),S=(0,i.$)(null==y?void 0:y.base,b),[,z]=(0,m.a)({rerender:!0,delay:100}),M=e.isIndeterminate,T=null!=(l=null!=(s=e.disableAnimation)?s:null==j?void 0:j.disableAnimation)&&l,{progressBarProps:Z,labelProps:A}=(0,h.E)({id:N,label:w,value:k,minValue:I,maxValue:E,valueLabel:_,formatOptions:C,isIndeterminate:M,"aria-labelledby":e["aria-labelledby"],"aria-label":e["aria-label"]}),R=(0,u.useMemo)(()=>(0,t.q)({...g,disableAnimation:T}),[(0,c.t6)(g),T]),q=!!T||z,F=(0,u.useMemo)(()=>M||!q?void 0:(0,d.QN)((k-I)/(E-I)*100),[q,M,k,I,E]),$=(0,u.useCallback)((s={})=>({ref:U,"data-indeterminate":(0,o.sE)(M),"data-disabled":(0,o.sE)(e.isDisabled),className:R.base({class:S}),...(0,x.v)(Z,D,s)}),[U,R,M,e.isDisabled,S,Z,D]),O=(0,u.useCallback)((e={})=>({className:R.label({class:null==y?void 0:y.label}),...(0,x.v)(A,e)}),[R,y,A]);return{Component:v||"div",domRef:U,slots:R,classNames:y,label:w,percentage:F,showValueLabel:P,getProgressBarProps:$,getLabelProps:O}}({...e,ref:s}),w=b(),_=f||N;return(0,j.jsxs)(l,{...w,children:[_?(0,j.jsxs)("div",{className:p.labelWrapper({class:null==g?void 0:g.labelWrapper}),children:[f&&(0,j.jsx)("span",{...y(),children:f}),N&&(0,j.jsx)("span",{className:p.value({class:null==g?void 0:g.value}),children:w["aria-valuetext"]})]}):null,(0,j.jsx)("div",{className:p.track({class:null==g?void 0:g.track}),children:(0,j.jsx)("div",{className:p.indicator({class:null==g?void 0:g.indicator}),style:{transform:`translateX(-${100-(v||0)}%)`}})})]})});p.displayName="HeroUI.Progress";var g=p},93404:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/rag/indices/[id]",function(){return l(27501)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[5352,6361,1127,5892,9235,9177,3010,636,6593,8792],()=>s(93404)),_N_E=e.O()}]);