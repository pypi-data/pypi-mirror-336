import{b as A,G as i,o as f,c as w,w as o,a as t,f as y,S as _,t as g,_ as C,R as L,J as R}from"./index-iBY7DK1v.js";import{l as b}from"./logs-BxgcpBAK.js";import{d as I,V as N}from"./index-BYHe-Lz6.js";import{V as h,a as S}from"./VToolbar-DKKaf1u-.js";import{V as D}from"./VSpacer-oBQMx8H2.js";import{V as F}from"./VTextField-DYxGSp0H.js";import{V as G}from"./VChip-D9Ast84G.js";import{c as $}from"./VCard-B3J-EElU.js";import"./VDataTable-BbG1MBfP.js";import"./index-B-SZSIyg.js";import"./tag-B1PWMplM.js";import"./dimensions-DgLfpRRd.js";import"./VProgressCircular-BaXwBt9a.js";import"./VSelect-Bws_z10x.js";import"./forwardRefs-CAu7KObs.js";import"./ssrBoot-BBtl5VTl.js";import"./VAvatar-CcykeumL.js";import"./VMenu-D3eMLgje.js";import"./filter-EgyOLE7t.js";/* empty css              */const z={__name:"AuditTrailList",setup(V){const{$gettext:a}=A(),s=i(!1),c=i([]),n=i(""),p=i(0),v=[{title:a("Date"),key:"date_created"},{title:a("Level"),key:"level"},{title:a("Logger"),key:"logger"},{title:a("Message"),key:"message"}];function T(r){return r==="INFO"?"primary":r==="WARNING"?"orange":r==="CRITICAL"||r==="ERROR"?"red":""}function m({page:r,itemsPerPage:l,sortBy:e,search:x}){let u;e.length&&(u=(e[0].order==="desc"?"-":"")+e[0].key);const k={ordering:u,page:r,page_size:l,search:x};s.value=!0,b.getAuditTrail(k).then(d=>{c.value=d.data.results,p.value=d.data.count,s.value=!1})}return m=I(m,500),(r,l)=>(f(),w($,{class:"mt-6"},{default:o(()=>[t(N,{headers:v,items:c.value,search:n.value,class:"elevation-0","items-length":p.value,"onUpdate:options":m},{top:o(()=>[t(h,{flat:"",color:"white"},{default:o(()=>[t(D),t(F,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),"prepend-inner-icon":"mdi-magnify",placeholder:y(a)("Search"),variant:"outlined","hide-details":""},null,8,["modelValue","placeholder"])]),_:1})]),"item.level":o(({item:e})=>[t(G,{color:T(e.level),"text-color":"white",size:"small"},{default:o(()=>[_(g(e.level),1)]),_:2},1032,["color"])]),_:2},1032,["items","search","items-length"])]),_:1}))}},E={__name:"AuditTrailView",setup(V){return(a,s)=>(f(),L(R,null,[t(h,{flat:""},{default:o(()=>[t(S,null,{default:o(()=>[_(g(a.$gettext("Audit trail")),1)]),_:1})]),_:1}),t(z)],64))}},le=C(E,[["__scopeId","data-v-5d9f29af"]]);export{le as default};
