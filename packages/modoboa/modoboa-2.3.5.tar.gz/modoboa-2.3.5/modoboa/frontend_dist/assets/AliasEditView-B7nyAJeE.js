import{b as $,af as G,au as U,N as j,O as M,G as d,d as O,f as i,o as s,c as m,R as _,a,w as e,S as r,t as n,e as E,J as C,V as z,_ as J}from"./index-iBY7DK1v.js";import{_ as q,a as H}from"./AliasRecipientForm-DQiJNxF3.js";import{L as K}from"./LoadingData-B-FP4HlM.js";import{s as b,h as w,g as A}from"./index-B-SZSIyg.js";import{V as R,c as S,a as T,b as Q}from"./VExpansionPanels-D63DWUK-.js";import{a as g,V as p}from"./VRow-3ZnNVBUg.js";import{V as W}from"./VChip-D9Ast84G.js";import{V as X,a as Y}from"./VToolbar-DKKaf1u-.js";import"./EmailField-D8dP5XZw.js";import"./VTextField-DYxGSp0H.js";import"./tag-B1PWMplM.js";import"./VProgressCircular-BaXwBt9a.js";import"./forwardRefs-CAu7KObs.js";import"./ssrBoot-BBtl5VTl.js";import"./dimensions-DgLfpRRd.js";import"./VAvatar-CcykeumL.js";import"./VForm-DCBDn5wc.js";import"./VSwitch-BdhFnqLv.js";import"./VSelect-Bws_z10x.js";import"./VMenu-D3eMLgje.js";import"./VTextarea-B65YnMEt.js";import"./VContainer-BgjPTvnI.js";/* empty css              */const Z={key:1},ee={key:0},ae={class:"mr-2"},te={key:0},le={class:"mt-4 d-flex justify-end"},se={__name:"AliasEditForm",setup(B){const{$gettext:u}=$(),k=G(),y=U(),x=j(),N=M(),o=d({pk:x.params.id}),v=d(0),f=d(!1),V=d(!1),F=d(),h=d(),I={generalForm:F,recipientForm:h};async function L(){V.value=!1,v.value=[];for(const[c,l]of Object.entries(I))if(l.value!=null){const{valid:t}=await l.value.vFormRef.validate();t||(V.value=!0,v.value.push(c))}V.value||(f.value=!0,k.updateIdentity("alias",o.value).then(()=>N.push({name:"AliasDetail",params:{id:x.params.id}})).finally(()=>f.value=!1))}return O(()=>{y.getAlias(x.params.id).then(c=>{o.value={...c.data}})}),(c,l)=>!i(y).aliasesLoaded||f.value?(s(),m(K,{key:0})):(s(),_("div",Z,[a(Q,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=t=>v.value=t),multiple:V.value},{default:e(()=>[a(R,{eager:"",value:"generalForm"},{default:e(()=>[a(S,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(p,{cols:"4"},{default:e(()=>[r(n(i(u)("General")),1)]),_:1}),a(p,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(b,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",ee)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[a(p,{cols:"6"},{default:e(()=>[r(n(i(u)("Address"))+": "+n(o.value.address),1)]),_:1}),a(p,{cols:"6"},{default:e(()=>[E("div",ae,n(i(u)("Enabled")),1),o.value.enabled?(s(),m(w,{key:0,color:"success"},{default:e(()=>[r("mdi-check-circle-outline")]),_:1})):(s(),m(w,{key:1},{default:e(()=>[r("mdi-close-circle-outline")]),_:1}))]),_:1})]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(T,null,{default:e(()=>[a(q,{ref_key:"generalForm",ref:F,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t)},null,8,["modelValue"])]),_:1})]),_:1}),a(R,{eager:"",value:"recipientForm"},{default:e(()=>[a(S,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(p,{cols:"4"},{default:e(()=>[r(n(i(u)("Recipients")),1)]),_:1}),a(p,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(b,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",te)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[(s(!0),_(C,null,z(o.value.recipients,(P,D)=>(s(),m(W,{key:D,size:"small"},{default:e(()=>[r(n(P),1)]),_:2},1024))),128))]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(T,null,{default:e(()=>[a(i(H),{ref_key:"recipientForm",ref:h,modelValue:o.value.recipients,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value.recipients=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","multiple"]),E("div",le,[a(A,{loading:f.value,onClick:l[3]||(l[3]=t=>c.$router.go(-1))},{default:e(()=>[r(n(i(u)("Cancel")),1)]),_:1},8,["loading"]),a(A,{class:"ml-4",color:"primary darken-1",loading:f.value,onClick:L},{default:e(()=>[r(n(i(u)("Save")),1)]),_:1},8,["loading"])])]))}},oe={__name:"AliasEditView",setup(B){const{$gettext:u}=$();return(k,y)=>(s(),_(C,null,[a(X,{flat:""},{default:e(()=>[a(Y,null,{default:e(()=>[r(n(i(u)("Edit alias")),1)]),_:1})]),_:1}),a(se,{alias:k.alias},null,8,["alias"])],64))}},Se=J(oe,[["__scopeId","data-v-21c8ea90"]]);export{Se as default};
