(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1850],{98720:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection",function(){return n(22285)}])},77867:function(e,t,n){"use strict";var i=n(24246),s=n(56351);t.Z=e=>{let{connected:t,...n}=e,r="red.500";return null==t?r="gray.300":t&&(r="green.500"),(0,i.jsx)(s.xuv,{width:"12px",height:"12px",borderRadius:"6px",backgroundColor:r,...n})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(24246),s=n(56351),r=n(88038),o=n.n(r),l=n(86677);n(27378);var a=n(25980),c=n(90867),d=n(77830),u=()=>{let e=(0,l.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.fz)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},x=e=>{let{children:t,title:n,padded:r=!0,mainProps:d}=e,x=(0,a.hz)(),h=(0,l.useRouter)(),p="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,m=!(x.flags.privacyRequestsConfiguration&&p),{data:g}=(0,c.JE)(void 0,{skip:m}),{data:j}=(0,c.PW)(void 0,{skip:m}),f=x.flags.privacyRequestsConfiguration&&(!g||!j)&&p;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(o(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:r?6:0,px:r?10:0,h:r?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[f?(0,i.jsx)(u,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var i=n(24246),s=n(56351),r=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:l,rightContent:a,style:c,...d}=e;return(0,i.jsxs)("div",{...d,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.X6q,{className:n||l?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,a&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:a})]}),!!n&&(0,i.jsx)(r.m,{className:l?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),l]})}},96718:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var i=n(24246),s=n(56351);let r=e=>{let{...t}=e,n="multiple"===t.mode;return(0,i.jsx)(s.WPr,{defaultActiveFirstOption:!1,maxTagCount:"responsive",allowClear:!0,dropdownStyle:n?void 0:{width:"auto",minWidth:"200px"},className:"w-auto","data-testid":"filter-select",...t})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),s=n(56351),r=n(79894),o=n.n(r),l=n(27378);let{Text:a}=s.AntTypography,c=e=>{let{items:t,...n}=e,r=(0,l.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let r=n===t.length-1,l={...e},c=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,i.jsx)(a,{style:{color:"inherit",maxWidth:r?void 0:400},ellipsis:!r,children:l.title})),c)?l.title=(0,i.jsx)(s.wpx,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,i.jsx)(o(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[t]);return(0,i.jsx)(s.zrq,{items:r,...n})}},41337:function(e,t,n){"use strict";var i=n(24246),s=n(56351);n(27378);var r=n(21702),o=n(14746);let l=e=>void 0!==e.connection_type,a=e=>void 0!==e.encoded_icon;t.Z=e=>{let{data:t,...n}=e;return(0,i.jsx)(s.Eep,{boxSize:"32px",objectFit:"cover",src:(()=>{let e;if(a(t)&&t.encoded_icon)return"data:image/svg+xml;base64,".concat(t.encoded_icon);if(l(t))e=[...o.iW].find(e=>{var n,i;let[s]=e;return t.connection_type.toString()!==r.Rj.SAAS&&t.connection_type.toString()===s||t.connection_type.toString()===r.Rj.SAAS&&(null===(i=t.saas_config)||void 0===i?void 0:null===(n=i.type)||void 0===n?void 0:n.toString())===s.toString()});else if(a(t)){let{identifier:n}=t;e=[...o.iW].find(e=>{let[t]=e;return t.toLowerCase()===n.toLowerCase()})}return e?o.Ny+e[1]:o.VD})(),fallbackSrc:o.VD,alt:(()=>{if(l(t)){var e;return null!==(e=t.name)&&void 0!==e?e:t.key}return a(t)?t.human_readable:t})(),...n})}},1226:function(e,t,n){"use strict";var i=n(24246);n(27378);var s=n(77213);t.Z=e=>{let{children:t}=e;return(0,i.jsx)(s.Z,{title:"Connections",children:t})}},15872:function(e,t,n){"use strict";var i=n(24246),s=n(56351),r=n(86677);n(27378);var o=n(77830),l=n(14207);t.Z=e=>{let{connection_key:t,showMenu:n}=e,{isOpen:a,onOpen:c,onClose:d}=(0,s.qY0)(),[u,x]=(0,l.R5)(),h=(0,r.useRouter)(),p=()=>{x.isLoading||d()};return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(s.sNh,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:c,children:(0,i.jsx)(s.xvT,{fontSize:"sm",children:"Delete"})}),!n&&(0,i.jsx)(s.wpx,{onClick:c,children:"Delete integration"}),(0,i.jsxs)(s.u_l,{isCentered:!0,isOpen:a,onClose:p,children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{children:[(0,i.jsx)(s.xBx,{children:"Delete integration"}),(0,i.jsx)(s.olH,{}),(0,i.jsx)(s.fef,{pb:6,children:(0,i.jsx)(s.Kqy,{direction:"column",spacing:"15px",children:(0,i.jsx)(s.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:"Deleting an integration may impact any privacy request that is currently in progress. Do you wish to proceed?"})})}),(0,i.jsxs)(s.mzw,{className:"flex gap-4",children:[(0,i.jsx)(s.wpx,{onClick:p,className:"w-1/2",children:"Cancel"}),(0,i.jsx)(s.wpx,{onClick:()=>{t&&(u(t),n||h.push(o.KH))},loading:x.isLoading,type:"primary",className:"w-1/2",children:"Delete integration"})]})]})]})]})}},73183:function(e,t,n){"use strict";var i=n(24246),s=n(56351);n(27378);var r=n(14207);t.Z=e=>{let{connection_key:t,disabled:n,name:o,access_type:l,connection_type:a,isSwitch:c}=e,{isOpen:d,onOpen:u,onClose:x}=(0,s.qY0)(),[h,p]=(0,r.XX)(),m=async()=>{await h({key:t,name:o,disabled:!n,access:l,connection_type:a}),x()},g=()=>{p.isLoading||x()};return(0,i.jsxs)(i.Fragment,{children:[c?(0,i.jsxs)(s.kCb,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(s.xvT,{fontSize:"sm",children:"Enable integration"}),(0,i.jsx)(s.rAg,{className:"ml-2",checked:!n,onChange:()=>u()})]}):(0,i.jsx)(s.sNh,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:u,children:(0,i.jsx)(s.xvT,{fontSize:"sm",children:n?"Enable":"Disable"})}),(0,i.jsxs)(s.u_l,{isCentered:!0,isOpen:d,onClose:g,children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{children:[(0,i.jsxs)(s.xBx,{children:[n?"Enable":"Disable"," Connection"]}),(0,i.jsx)(s.olH,{}),(0,i.jsx)(s.fef,{pb:6,children:(0,i.jsx)(s.Kqy,{direction:"column",spacing:"15px",children:(0,i.jsxs)(s.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:[n?"Enabling":"Disabling"," a connection may impact any privacy request that is currently in progress. Do you wish to proceed?"]})})}),(0,i.jsxs)(s.mzw,{className:"flex gap-4",children:[(0,i.jsx)(s.wpx,{onClick:g,className:"w-1/2",children:"Cancel"}),(0,i.jsxs)(s.wpx,{onClick:m,loading:p.isLoading,className:"w-1/2",children:[n?"Enable":"Disable"," Connection"]})]})]})]})]})}},8627:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var i=n(24246),s=n(56351),r=n(77867),o=n(16394);let l=e=>{let{succeeded:t,timestamp:n}=e,l=n?(0,o.p6)(n):"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,{connected:t}),(0,i.jsx)(s.xvT,{color:"gray.500",fontSize:"xs",fontWeight:"semibold",lineHeight:"16px",ml:"10px",children:n?"Last tested on ".concat(l):"This connection has not been tested yet"})]})}},22285:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var i=n(24246),s=n(16394),r=n(56351),o=n(27378),l=n(16134),a=n(20682),c=n(45007),d=n(14207),u=n(96718),x=()=>{let{connectionOptions:e}=(0,l.C)(a.ZZ),{connection_type:t}=(0,l.C)(d.dR),n=(0,o.useCallback)(()=>{let n=new Map;return e.forEach(e=>{let i=!1;(null==t?void 0:t.includes(e.identifier))&&(i=!0),n.set(e.human_readable,i)}),n},[e,t]),s=[...(0,o.useMemo)(()=>n(),[n])].map(e=>{let[t]=e;return{value:t,label:t}}),r=(0,l.T)();return(0,i.jsx)(u.z,{mode:"multiple",placeholder:"Connection Type",options:s,onChange:t=>{let n=e.filter(e=>t.includes(e.human_readable));r((0,d.Iw)(n.map(e=>e.identifier)))},defaultValue:(null==t?void 0:t.length)?t:[],className:"w-60","data-testid":"connection-type-filter"})},h=n(14746),p=()=>{let{disabled_status:e}=(0,c.v9)(d.dR),t=()=>{let e=new Map;return Object.values(h.QI).sort().forEach(t=>{e.set((0,s.kC)(t),{value:t})}),e},n=[...(0,o.useMemo)(()=>t(),[])].map(e=>{let[t,n]=e;return{value:n.value,label:t}}),r=(0,c.I0)();return(0,i.jsx)(u.z,{placeholder:"Status",options:n,onChange:e=>{r((0,d.Ru)(e||""))},defaultValue:(null==e?void 0:e.toString())||void 0,"data-testid":"disabled-status-filter"})},m=n(26788),g=()=>{let{system_type:e}=(0,c.v9)(d.dR),t=new Map(m.yI);t.delete("Show all");let n=[...t].map(e=>{let[t,n]=e;return{value:n.value,label:t}}),s=(0,l.T)();return(0,i.jsx)(u.z,{placeholder:"System Type",options:n,onChange:e=>{s((0,d.zq)(e||""))},defaultValue:(null==e?void 0:e.toString())||void 0,"data-testid":"system-type-filter"})},j=()=>{let{test_status:e}=(0,c.v9)(d.dR),t=()=>{let e=new Map;return Object.values(h.i0).sort().forEach(t=>{e.set((0,s.kC)(t),{value:t})}),e},n=[...(0,o.useMemo)(()=>t(),[])].map(e=>{let[t,n]=e;return{value:n.value,label:t}}),r=(0,c.I0)();return(0,i.jsx)(u.z,{placeholder:"Testing Status",options:n,onChange:e=>{r((0,d.Ri)(e||""))},defaultValue:(null==e?void 0:e.toString())||void 0,"data-testid":"testing-status-filter"})};let f=()=>{let e=(0,c.v9)(d.dR),t=(0,c.I0)();return{handleSearchChange:e=>t((0,d.qP)(e.target.value)),...e}};var v=()=>{let{handleSearchChange:e,search:t}=f();return(0,i.jsxs)(r.kCb,{minWidth:"fit-content",alignItems:"center",gap:"4",mb:6,flexWrap:"wrap",children:[(0,i.jsxs)(r.BZy,{size:"sm",minWidth:"308px",children:[(0,i.jsx)(r.Z8_,{pointerEvents:"none",children:(0,i.jsx)(r.PTu,{color:"gray.300",w:"17px",h:"17px"})}),(0,i.jsx)(r.IIB,{autoComplete:"off",autoFocus:!0,type:"search",minWidth:200,placeholder:"Search connection name or description",size:"sm",borderRadius:"md",value:t,name:"search",onChange:e})]}),(0,i.jsx)(x,{}),(0,i.jsx)(g,{}),(0,i.jsx)(j,{}),(0,i.jsx)(p,{})]})},y=e=>{let{page:t,size:n,total:s,handleNextPage:o,handlePreviousPage:l}=e,a=(t-1)*n+1,c=Math.min(s,t*n);return(0,i.jsxs)(r.kCb,{justifyContent:"space-between",mt:6,children:[(0,i.jsx)(r.xvT,{fontSize:"xs",color:"gray.600",children:s>0?(0,i.jsxs)(i.Fragment,{children:["Showing ",Number.isNaN(a)?0:a," to"," ",Number.isNaN(c)?0:c," of"," ",Number.isNaN(s)?0:s," results"]}):"0 results"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(r.wpx,{disabled:t<=1,onClick:l,className:"mr-2",children:"Previous"}),(0,i.jsx)(r.wpx,{disabled:t*n>=s,onClick:o,children:"Next"})]})]})},b=n(40542),C=n.n(b),w=n(79894),_=n.n(w),k=n(77830),S=n(15872),N=n(73183),z=e=>{let{connection_key:t,disabled:n,connection_type:s,access_type:o,name:l}=e;return(0,i.jsxs)(r.v2r,{children:[(0,i.jsx)(r.j2t,{as:r.zxk,size:"xs",bg:"white","data-testid":"connection-menu-btn",children:(0,i.jsx)(r.nXP,{color:"gray.700",w:18,h:18})}),(0,i.jsx)(r.h_i,{children:(0,i.jsxs)(r.qyq,{fontSize:"sm",shadow:"xl","data-testid":"connection-menu-".concat(l),children:[(0,i.jsx)(r.sNh,{as:_(),href:"".concat(k.JR,"/").concat(encodeURIComponent(t)),_focus:{color:"complimentary.500",bg:"gray.100"},"data-testid":"configure-btn",children:"Configure"}),(0,i.jsx)(N.Z,{connection_key:t,disabled:n,connection_type:s,access_type:o,name:l,isSwitch:!1}),(0,i.jsx)(S.Z,{showMenu:!0,connection_key:t})]})})]})},T=e=>{let{disabled:t}=e;return(0,i.jsx)(r.j8w,{color:t?"marble":"success",className:"mr-1 text-center",children:t?"DISABLED":"ACTIVE"})},Z=n(41337),R=n(8627),E=e=>{var t;let{connectionData:n}=e,[c,u]=(0,d.h2)(),{connectionOptions:x}=(0,l.C)(a.ZZ),h=(0,o.useMemo)(()=>x.find(e=>e.identifier===n.connection_type||n.saas_config&&e.identifier===n.saas_config.type)||"ethyca",[n,x]);return(0,i.jsxs)(r.xuv,{width:"100%",height:136,p:"18px 16px 16px 16px","data-testid":"connection-grid-item-".concat(n.name),children:[(0,i.jsxs)(r.kCb,{justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(Z.Z,{data:h}),(0,i.jsx)(r.xvT,{color:"gray.900",fontSize:"md",fontWeight:"medium",m:"8px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:n.name}),(0,i.jsx)(r.LZC,{}),(0,i.jsx)(T,{disabled:!!n.disabled}),(0,i.jsx)(z,{connection_key:n.key,disabled:!!n.disabled,name:null!==(t=n.name)&&void 0!==t?t:n.key,connection_type:n.connection_type,access_type:n.access})]}),(0,i.jsx)(r.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:n.description?n.description:(0,i.jsx)("br",{})}),(0,i.jsxs)(r.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:["Edited on ",(0,s.p6)(n.updated_at)]}),(0,i.jsxs)(r.kCb,{mt:"0px",justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(R.s,{succeeded:n.last_test_succeeded,timestamp:n.last_test_timestamp||""}),(0,i.jsx)(r.LZC,{}),(0,i.jsx)(r.wpx,{size:"small",onClick:()=>{c(n.key)},loading:u.isLoading||u.isFetching,children:"Test"})]})]})};let I=()=>{let e=(0,c.I0)(),t=(0,l.C)(d.dR);return{...t,handleNextPage:()=>{e((0,d.YA)(t.page+1))},handlePreviousPage:()=>{e((0,d.YA)(t.page-1))}}};var W=e=>{let{items:t=[],total:n=0}=e,{page:s,size:o,handleNextPage:l,handlePreviousPage:a}=I(),c=(0,r.yo_)(t,3);return(0,i.jsxs)(i.Fragment,{children:[c.map((e,t,n)=>{let{length:s}=n;return(0,i.jsx)(r.xuv,{className:C()["grid-row"],borderBottomWidth:s>1&&t===s-1&&3===e.length?"0.5px":void 0,"data-testid":"connection-grid",children:(0,i.jsx)(r.MIq,{columns:3,children:e.map(e=>(0,i.jsx)(r.xuv,{className:C()["grid-item"],children:(0,i.jsx)(E,{connectionData:e})},e.key))})},JSON.stringify(e))}),(0,i.jsx)(y,{page:s,size:o,total:n,handleNextPage:l,handlePreviousPage:a})]})},q=e=>{let{hasFilters:t}=e;return(0,i.jsxs)(r.kCb,{bg:"gray.50",width:"100%",height:"340px",justifyContent:"center",alignItems:"center",flexDirection:"column","data-testid":"connections-empty-state",children:[(0,i.jsx)(r.xvT,{color:"black",fontSize:"x-large",lineHeight:"32px",fontWeight:"600",mb:"7px",children:t?"No connections found":"All of your connections have been linked!"}),(0,i.jsx)(r.xvT,{color:"gray.600",fontSize:"sm",lineHeight:"20px",mb:"11px",children:t?"Modify your search parameters":"You are ready to upgrade Fides"})]})},D=n(25980),P=n(58754),A=n(86677),F=()=>{let e=(0,A.useRouter)();return(0,i.jsx)(r.wpx,{onClick:()=>e.push(m.Ss[1].href),type:"primary",children:"Create new connection"})},M=()=>{let e=(0,D.hz)();return(0,i.jsx)(P.Z,{heading:"Unlinked Connections",rightContent:e.flags.standaloneConnections&&(0,i.jsx)(F,{}),children:(0,i.jsx)(r.xuv,{maxWidth:"450px",children:(0,i.jsxs)(r.xvT,{fontSize:"sm",children:["Connections are now created in the"," ",(0,i.jsx)(r.rUS,{color:"complimentary.500",href:k.xo,children:"system configuration"})," ","section. You can link existing connections to a new or existing system."]})})})},L=()=>{var e;let t=(0,o.useRef)(!1),n=(0,l.T)(),{connectionOptions:c}=(0,l.C)(a.ZZ),u=(0,l.C)(d.dR),[x,h]=(0,o.useState)(u),p=(0,o.useRef)((0,s.Ds)(e=>h(e),250)),{data:m}=(0,a.$I)({search:""},{skip:c.length>0}),{data:g,isFetching:j,isLoading:f,isSuccess:y}=(0,d.AZ)(x),b=(null==g?void 0:null===(e=g.items)||void 0===e?void 0:e.length)>0,C=!!u.search||!!u.connection_type||!!u.system_type||!!u.disabled_status||!!u.test_status;return(0,o.useEffect)(()=>{n((0,d.um)(!0))},[n]),(0,o.useEffect)(()=>(t.current=!0,0===c.length&&(null==m?void 0:m.items)&&n((0,a.fP)(m.items)),p.current(u),()=>{t.current=!1}),[c.length,null==m?void 0:m.items,n,u]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M,{}),t.current&&(0,i.jsx)(v,{}),(j||f)&&(0,i.jsx)(r.M5Y,{children:(0,i.jsx)(r.$jN,{})}),t.current&&y&&(b?(0,i.jsx)(W,{items:null==g?void 0:g.items,total:null==g?void 0:g.total}):(0,i.jsx)(q,{hasFilters:C}))]})},H=n(1226),B=()=>(0,i.jsx)(H.Z,{children:(0,i.jsx)(L,{})})},40542:function(e){e.exports={"grid-row":"ConnectionGrid_grid-row__Cv_Zf","grid-item":"ConnectionGrid_grid-item__xP7eK"}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=98720)}),_N_E=e.O()}]);