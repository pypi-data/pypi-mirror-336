(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8473],{64902:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset",function(){return a(91949)}])},79806:function(e,t,a){"use strict";a.d(t,{Gn:function(){return o},zR:function(){return l}});var s=a(24246),i=a(56351),n=a(56358);let l=e=>{let{title:t}=e;return(0,s.jsx)(i.OXI,{py:0,display:"flex",alignItems:"flex-start",children:(0,s.jsx)(i.xvT,{mr:"2",color:"gray.700",fontSize:"lg",lineHeight:1.8,children:t})})},o=e=>{let{onDelete:t,onEditYaml:a,formId:l,isSaving:o}=e;return(0,s.jsxs)(i.zeN,{justifyContent:"space-between",children:[t?(0,s.jsx)(i.wpx,{"aria-label":"delete",icon:(0,s.jsx)(n.q,{fontSize:"small"}),onClick:t,"data-testid":"delete-btn"}):null,(0,s.jsxs)("div",{className:"flex gap-2",children:[a&&(0,s.jsx)(i.wpx,{onClick:a,"data-testid":"edit-yaml-btn",children:"Edit YAML"}),(0,s.jsx)(i.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",form:l,loading:o,children:"Save"})]})]})};t.ZP=e=>{let{header:t,description:a,isOpen:n,onClose:l,children:o,footer:d}=e;return(0,s.jsxs)(i.dys,{placement:"right",isOpen:n,onClose:l,size:"md",children:[(0,s.jsx)(i.P1B,{}),(0,s.jsxs)(i.scA,{"data-testid":"edit-drawer-content",py:2,children:[(0,s.jsxs)(i.xuv,{display:"flex",justifyContent:"space-between",alignItems:"top",mr:2,py:2,gap:2,children:[(0,s.jsx)(i.xuv,{flex:1,minH:8,children:t}),(0,s.jsx)(i.xuv,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,s.jsx)(i.wpx,{"aria-label":"Close editor",onClick:l,"data-testid":"close-drawer-btn",icon:(0,s.jsx)(i.Two,{fontSize:"smaller"})})})]}),(0,s.jsxs)(i.Ng0,{pt:1,children:[a?(0,s.jsx)(i.xvT,{fontSize:"sm",mb:4,color:"gray.600",children:a}):null,o]}),d]})]})}},56358:function(e,t,a){"use strict";a.d(t,{q:function(){return i}});var s=a(24246);let i=(0,a(56351).IUT)({displayName:"TrashCanOutlineIcon",viewBox:"0 0 11 12",path:(0,s.jsx)("path",{d:"M4.5166 1.60859L4.1084 2.21875H7.22363L6.81543 1.60859C6.7832 1.56133 6.72949 1.53125 6.67148 1.53125H4.6584C4.60039 1.53125 4.54668 1.55918 4.51445 1.60859H4.5166ZM7.6748 1.03711L8.46328 2.21875H8.75977H9.79102H9.96289C10.2486 2.21875 10.4785 2.44863 10.4785 2.73438C10.4785 3.02012 10.2486 3.25 9.96289 3.25H9.79102V9.78125C9.79102 10.7309 9.02188 11.5 8.07227 11.5H3.25977C2.31016 11.5 1.54102 10.7309 1.54102 9.78125V3.25H1.36914C1.0834 3.25 0.853516 3.02012 0.853516 2.73438C0.853516 2.44863 1.0834 2.21875 1.36914 2.21875H1.54102H2.57227H2.86875L3.65723 1.03496C3.88066 0.701953 4.25664 0.5 4.6584 0.5H6.67148C7.07324 0.5 7.44922 0.701953 7.67266 1.03496L7.6748 1.03711ZM2.57227 3.25V9.78125C2.57227 10.1615 2.87949 10.4688 3.25977 10.4688H8.07227C8.45254 10.4688 8.75977 10.1615 8.75977 9.78125V3.25H2.57227ZM4.29102 4.625V9.09375C4.29102 9.28281 4.13633 9.4375 3.94727 9.4375C3.7582 9.4375 3.60352 9.28281 3.60352 9.09375V4.625C3.60352 4.43594 3.7582 4.28125 3.94727 4.28125C4.13633 4.28125 4.29102 4.43594 4.29102 4.625ZM6.00977 4.625V9.09375C6.00977 9.28281 5.85508 9.4375 5.66602 9.4375C5.47695 9.4375 5.32227 9.28281 5.32227 9.09375V4.625C5.32227 4.43594 5.47695 4.28125 5.66602 4.28125C5.85508 4.28125 6.00977 4.43594 6.00977 4.625ZM7.72852 4.625V9.09375C7.72852 9.28281 7.57383 9.4375 7.38477 9.4375C7.1957 9.4375 7.04102 9.28281 7.04102 9.09375V4.625C7.04102 4.43594 7.1957 4.28125 7.38477 4.28125C7.57383 4.28125 7.72852 4.43594 7.72852 4.625Z",fill:"currentColor"})})},8133:function(e,t,a){"use strict";var s=a(24246),i=a(56351);t.Z=e=>{let{title:t,children:a,isOpen:n,onClose:l,...o}=e;return(0,s.jsxs)(i.u_l,{isOpen:n,onClose:l,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...o,children:[(0,s.jsx)(i.ZAr,{}),(0,s.jsxs)(i.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,s.jsx)(i.xBx,{p:0,children:(0,s.jsx)(i.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,s.jsx)(i.X6q,{as:"h3",size:"sm",children:t})})}),(0,s.jsx)(i.fef,{pb:4,overflow:"auto",children:a})]})]})}},56026:function(e,t,a){"use strict";a.d(t,{QL:function(){return n},du:function(){return i},tz:function(){return s}});let s={name:{tooltip:"A UI-friendly label for the Dataset."},description:{tooltip:"A human-readable description of the Dataset."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all collections in the Dataset."}},i={description:{tooltip:"A human-readable description of the collection."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all fields in the collection."}},n={description:{tooltip:"A human-readable description of the field."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to this field."}}},91949:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(24246),i=a(92222),n=a(59003),l=a(56351),o=a(79894),d=a.n(o),r=a(86677),c=a(27378),u=a(45007),p=a(32885),x=a(21702);let h=e=>{let{resourceType:t,fidesKeys:a,skip:s}=e,[i,n]=(0,c.useState)(!0),l=(0,p.Wm)({resource_type:t,fides_keys:a},{skip:s,pollingInterval:i?3e3:void 0}),o=!!l.data&&l.data.every(e=>e.status===x.Wg.COMPLETE||e.status===x.Wg.FAILED||e.status===x.Wg.REVIEWED);return(0,c.useEffect)(()=>{o&&n(!1)},[o]),{...l,isClassificationFinished:o}};var f=a(25980),m=a(77213),g=a(77830),j=a(58754),C=a(14481),y=a(20386),b=a(79806),v=a(812),w=a(46628),k=a(8133),_=a(84306),S=a(66527),z=a(41207),A=a(39715),D=a(41966),R=e=>{let{data:t=[],isSubmitting:a=!1,onCancel:i,onSubmit:n,disabled:o,isLoading:d,onChange:r}=e,u=(0,c.useRef)(null),{errorAlert:p}=(0,_.V)(),x=t.length>0?S.ZP.dump(t):void 0,[h,f]=(0,c.useState)(void 0),[m,g]=(0,c.useState)(!1),[j,C]=(0,c.useState)(!x),{data:y}=(0,D.NR)(),[b,v]=(0,c.useState)([]),w=e=>{S.ZP.load(e,{json:!0}),f(void 0)},k=()=>{if(y&&y.length){let e=u.current.getValue();v(y.filter(t=>e.includes("fides_key: ".concat(t.fides_key,"\n"))).map(e=>e.fides_key))}},R=o||j||!m||!!h||a;return(0,s.jsxs)(l.kCb,{gap:"97px",children:[(0,s.jsxs)(l.gCW,{align:"stretch",w:"800px",children:[(0,s.jsx)(z.M,{defaultLanguage:"yaml",defaultValue:x,height:"calc(100vh - 526px)",onChange:e=>{try{g(!0),w(e),C(!e||""===e.trim());let t=S.ZP.load(e||"",{json:!0});Array.isArray(t)?r(t[0]):r(t),k()}catch(e){(0,z.F)(e)?f(e):p("Could not parse the supplied YAML")}},onMount:(e,t)=>{u.current=e,u.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!1},readOnly:o},theme:"light"}),b.length>0?(0,s.jsxs)(l.xvT,{children:["You are about to overwrite the dataset",b.length>1?"s":""," ",b.map((e,t)=>{let a=t===b.length-1;return(0,s.jsxs)(c.Fragment,{children:[(0,s.jsx)(l.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:e}),a?".":", "]},e)})]}):null,(0,s.jsx)(l.mzw,{children:(0,s.jsxs)("div",{className:"flex w-full justify-end gap-4",children:[i&&(0,s.jsx)(l.wpx,{onClick:i,"data-testid":"cancel-btn",disabled:d,children:"Cancel"}),(0,s.jsx)(l.wpx,{type:"primary",onClick:()=>{null==n||n(),null==i||i()},"data-testid":"continue-btn",disabled:R,loading:a||d,children:"Confirm"})]})})]}),m&&(j||h)&&(0,s.jsx)(A.Z,{isEmptyState:j,yamlError:h})]})},E=e=>{let{isOpen:t,onClose:a,title:i,isLoading:n,returnFocusOnClose:o,isDatasetSelected:d,dataset:r,onChange:c,onSubmit:u}=e;return(0,s.jsx)(k.Z,{isOpen:t,onClose:a,size:"3xl",returnFocusOnClose:null==o||o,isCentered:!0,title:null!=i?i:"Edit Dataset",children:(0,s.jsx)(l.xuv,{"data-testid":"yaml-editor-section",children:(0,s.jsx)(R,{data:r?[r]:[],onSubmit:u,isSubmitting:!1,disabled:d,onChange:c,isLoading:n,onCancel:a})})})},V=a(34090),H=a(40324),T=a(56026);let M="edit-field-drawer";var Z=e=>{var t,a;let{values:i,onSubmit:n}=e,o={name:null!==(t=i.name)&&void 0!==t?t:"",description:null!==(a=i.description)&&void 0!==a?a:"",data_categories:i.data_categories};return(0,s.jsx)(V.J9,{initialValues:o,onSubmit:e=>{n({...e,data_categories:i.data_categories||[]})},children:(0,s.jsx)(V.l0,{id:M,children:(0,s.jsxs)(l.Kqy,{spacing:"3",children:[(0,s.jsx)(H.j0,{name:"name",label:"Name",tooltip:T.tz.name.tooltip,"data-testid":"name-input",variant:"block"}),(0,s.jsx)(H.j0,{name:"description",label:"Description",tooltip:T.tz.description.tooltip,"data-testid":"description-input",variant:"block"})]})})})},O=e=>{let{dataset:t,isOpen:a,onClose:i}=e,[n,{isLoading:o}]=(0,y.TG)(),[d]=(0,y.QY)(),u=(0,r.useRouter)(),p=(0,l.pmc)(),{isOpen:x,onOpen:h,onClose:f}=(0,l.qY0)(),{isOpen:m,onOpen:g,onClose:j}=(0,l.qY0)(),[C,k]=(0,c.useState)(void 0),_=async e=>{let a={...t,...e};try{let e=await n(a);(0,v.D4)(e)?p((0,w.Vo)((0,v.e$)(e.error))):p((0,w.t5)("Successfully modified dataset"))}catch(e){p((0,w.Vo)(e))}i()},S=async()=>{let{fides_key:e}=t,a=await d(e);(0,v.D4)(a)?p((0,w.Vo)((0,v.e$)(a.error))):p((0,w.t5)("Successfully deleted dataset")),(0,y.Zl)(void 0),u.push("/dataset"),i(),f()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(b.ZP,{isOpen:a,onClose:i,description:"A Dataset takes a database schema (tables and columns) and adds Fides privacy categorizations. Provide additional context to this dataset by filling out the fields below.",header:(0,s.jsx)(b.zR,{title:"Edit: ".concat(null==t?void 0:t.name)}),footer:(0,s.jsx)(b.Gn,{onClose:i,onDelete:h,onEditYaml:()=>g(),formId:M}),children:[(0,s.jsx)(E,{isOpen:m,onClose:j,onChange:k,onSubmit:()=>_(C),title:"Edit dataset YAML",isLoading:o,isDatasetSelected:!1,dataset:t}),(0,s.jsx)(Z,{values:t,onSubmit:_})]}),(0,s.jsx)(l.cVQ,{isOpen:x,onClose:f,onConfirm:S,title:"Delete Dataset",message:(0,s.jsxs)(l.xvT,{children:["You are about to permanently delete the dataset named"," ",(0,s.jsx)(l.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name}),". Are you sure you would like to continue?"]})})]})};let P=(0,i.Cl)(),I={items:[],total:0,page:1,size:25,pages:1},N=()=>(0,s.jsx)(l.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,s.jsxs)(l.gCW,{children:[(0,s.jsx)(l.xvT,{fontSize:"md",fontWeight:"600",children:"No datasets found."}),(0,s.jsx)(l.xvT,{fontSize:"sm",children:'Click "Create new dataset" to add your first dataset to Fides.'})]})});var L=()=>{let e=(0,u.I0)(),t=(0,r.useRouter)(),[a,o]=(0,c.useState)(!1),[p,b]=(0,c.useState)(),{PAGE_SIZES:v,pageSize:w,setPageSize:k,onPreviousPageClick:_,isPreviousPageDisabled:S,onNextPageClick:z,isNextPageDisabled:A,startRange:D,endRange:R,pageIndex:E,setTotalPages:V,resetPageIndexToDefault:H}=(0,C.oi)(),[T,M]=(0,c.useState)(),Z=(0,c.useCallback)(e=>{H(),M(e)},[H,M]),{data:L,isLoading:W,isFetching:F}=(0,y.rt)({page:E,size:w,search:T,exclude_saas_datasets:!0}),{items:Y,total:q,pages:G}=(0,c.useMemo)(()=>null!=L?L:I,[L]);(0,c.useEffect)(()=>{V(G)},[G,V]);let B=(0,c.useCallback)(a=>{e((0,y.Zl)(a.fides_key)),t.push({pathname:g.o5,query:{datasetId:encodeURIComponent(a.fides_key)}})},[e,t]),Q=(0,f.hz)();h({resourceType:x.j.DATASETS,skip:!Q.plus});let U=(0,c.useMemo)(()=>[P.accessor(e=>e.name,{id:"name",cell:e=>(0,s.jsx)(C.G3,{value:e.getValue(),fontWeight:"semibold"}),header:e=>(0,s.jsx)(C.Rr,{value:"Dataset Name",...e}),size:180}),P.accessor(e=>e.fides_key,{id:"fides_key",cell:e=>(0,s.jsx)(C.G3,{value:e.getValue()}),header:e=>(0,s.jsx)(C.Rr,{value:"Fides Key",...e}),size:150}),P.accessor(e=>e.description,{id:"description",cell:e=>(0,s.jsx)(C.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,s.jsx)(C.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),P.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,s.jsx)(l.Ugi,{spacing:0,"data-testid":"dataset-".concat(a.fides_key),children:(0,s.jsx)(l.wpx,{size:"small",icon:(0,s.jsx)(l.dY8,{}),onClick:()=>{b(a),o(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})].filter(Boolean),[]),X=(0,n.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:U,data:Y,columnResizeMode:"onChange"});return(0,s.jsx)(m.Z,{title:"Datasets",children:(0,s.jsxs)(l.xuv,{"data-testid":"system-management",children:[(0,s.jsx)(j.Z,{heading:"Datasets",breadcrumbItems:[{title:"All datasets"}],rightContent:(0,s.jsx)(d(),{href:"/dataset/new",passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(l.wpx,{"data-testid":"create-dataset-btn",children:"+ Add dataset"})})}),W?(0,s.jsx)(C.I4,{rowHeight:36,numRows:15}):(0,s.jsxs)(l.xuv,{"data-testid":"dataset-table",children:[(0,s.jsx)(C.Q$,{children:(0,s.jsx)(C.HO,{globalFilter:T,setGlobalFilter:Z,placeholder:"Search",testid:"dataset-search"})}),(0,s.jsx)(C.ZK,{tableInstance:X,emptyTableNotice:(0,s.jsx)(N,{}),onRowClick:B})]}),(0,s.jsx)(C.s8,{totalRows:q||0,pageSizes:v,setPageSize:k,onPreviousPageClick:_,isPreviousPageDisabled:S||F,onNextPageClick:z,isNextPageDisabled:A||F,startRange:D,endRange:R}),(0,s.jsx)(O,{dataset:p,isOpen:a,onClose:()=>{b(void 0),o(!1)}})]})})}}},function(e){e.O(0,[8033,2780,3005,4481,5574,2888,9774,179],function(){return e(e.s=64902)}),_N_E=e.O()}]);