"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6277],{87361:function(e,a,t){var n=t(24246),i=t(56351);a.Z=e=>{let{title:a,text:t,onClose:l}=e;return(0,n.jsxs)(i.Ugi,{backgroundColor:"gray.50",border:"1px solid",borderRadius:"md",justifyContent:"space-between",py:4,pr:6,pl:3,"data-testid":"empty-state",gap:2,position:"relative",children:[l&&(0,n.jsx)(i.Two,{boxSize:5,position:"absolute",right:3,top:3,zIndex:1,cursor:"pointer",p:1,onClick:l}),(0,n.jsx)(i.iid,{alignSelf:"start",color:"minos",mt:.5,flexGrow:0}),(0,n.jsxs)(i.kCb,{direction:"column",gap:2,flexGrow:1,children:[(0,n.jsx)(i.X6q,{fontSize:"md",children:a}),(0,n.jsx)(i.xvT,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:t})]})]})}},57899:function(e,a,t){var n=t(24246),i=t(56351),l=t(27378);a.Z=e=>{let{handleConfirm:a,isOpen:t,onClose:s,title:o,message:r,confirmButtonText:d="Continue",cancelButtonText:c="Cancel"}=e,u=(0,l.useRef)(null);return(0,n.jsx)(i.aRR,{isOpen:t,leastDestructiveRef:u,onClose:s,children:(0,n.jsx)(i.dhV,{children:(0,n.jsxs)(i._Tf,{alignItems:"center",textAlign:"center",children:[(0,n.jsx)(i.aNP,{marginTop:3}),(0,n.jsx)(i.fYl,{fontSize:"lg",fontWeight:"bold",children:o}),(0,n.jsx)(i.iPF,{pt:0,children:r}),(0,n.jsxs)(i.xoY,{children:[(0,n.jsx)(i.wpx,{ref:u,onClick:s,size:"large",children:c}),(0,n.jsx)(i.wpx,{onClick:()=>a(),type:"primary",size:"large",className:"ml-3","data-testid":"warning-modal-confirm-btn",children:d})]})]})})})}},90980:function(e,a,t){t.d(a,{R:function(){return r}});var n=t(24246),i=t(56351),l=t(79894),s=t.n(l),o=t(63662);let r=e=>{let{onClick:a,...t}=e;return(0,n.jsxs)(i.kCb,{alignItems:"center",mt:-4,mb:3,onClick:a,cursor:"pointer",...t,children:[(0,n.jsx)(i.wpx,{"aria-label":"Back",icon:(0,n.jsx)(i.Rpv,{}),className:"mr-2",size:"small"}),(0,n.jsx)(i.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]})};a.Z=e=>{let{backPath:a,...t}=e,l=(0,o.useRouter)();return(0,n.jsxs)(i.kCb,{alignItems:"center",mb:6,...t,children:[(0,n.jsx)(i.wpx,{onClick:()=>l.push(a),"aria-label":"Back",icon:(0,n.jsx)(i.Rpv,{}),className:"mr-2",size:"small"}),(0,n.jsx)(i.xvT,{as:s(),href:a,fontSize:"sm",fontWeight:"500",children:"Back"})]})}},16194:function(e,a,t){t.d(a,{RN:function(){return w},d0:function(){return A}});var n=t(24246),i=t(56351),l=t(34090),s=t(86677),o=t(27378),r=t(16134),d=t(40324),c=t(90980),u=t(77830),p=t(8411),b=t(51472),m=t(64781),x=t(48515),_=t(60325),v=t(34334),h=t(71922),g=t(98795),j=t(21702),f=t(97181);let y=[{label:"Banner and modal",value:j.re.BANNER_AND_MODAL},{label:"Modal",value:j.re.MODAL},{label:"Privacy center",value:j.re.PRIVACY_CENTER},{label:"Headless",value:j.re.HEADLESS}],k=[{label:"Opt In/Opt Out",value:x.O.OPT_IN_OPT_OUT},{label:"Acknowledge",value:x.O.ACKNOWLEDGE}],C="tcf_purposes_placeholder",w=e=>{let{buttonPanel:a,children:t}=e;return(0,n.jsxs)(i.kCb,{direction:"column",minH:"full",w:"25%",borderRight:"1px solid #DEE5EE",children:[(0,n.jsx)(i.kCb,{direction:"column",h:"full",overflowY:"auto",px:4,children:(0,n.jsx)(i.kCb,{direction:"column",gap:4,w:"full",pb:4,children:t})}),a]})},A=e=>{var a,t,x,A,R;let{allPrivacyNotices:E,translationsEnabled:T,onSelectTranslation:O,onCreateTranslation:N}=e,I=(0,s.useRouter)(),{values:D,setFieldValue:L,dirty:P,isValid:q,isSubmitting:z,initialValues:B}=(0,l.u6)(),F=(0,r.C)(h.Zp),S=(0,r.C)(h.G1);(0,h.J6)({page:F,size:S});let Z=(0,o.useMemo)(()=>{let e=[...E];return e.some(e=>e.id===C)||e.push({name:"TCF Purposes",id:C,notice_key:C,data_uses:[],consent_mechanism:j.J7.NOTICE_ONLY,disabled:!1}),e},[E]),Y=e=>{var a;let t=Z.find(a=>a.id===e);return null!==(a=null==t?void 0:t.name)&&void 0!==a?a:e};(0,m.QM)();let M=(0,r.C)(m.P8),V=[...(0,_.TK)(M.locations),...(0,_.TK)(M.location_groups)],W=(0,r.C)(v.fJ),U=(0,r.C)(g.Zp),H=(0,r.C)(g.G1);(0,g.gz)({page:U,size:H});let G=(0,r.C)(g.YO),J=(0,n.jsxs)("div",{className:"flex justify-between border-t border-[#DEE5EE] p-4",children:[(0,n.jsx)(i.wpx,{onClick:()=>I.push(u.w0),children:"Cancel"}),(0,n.jsx)(i.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",disabled:z||!P||!q,loading:z,children:"Save"})]});return(0,n.jsxs)(w,{buttonPanel:J,children:[(0,n.jsx)(c.Z,{backPath:u.w0,mt:4}),(0,n.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",children:"Configure experience"}),(0,n.jsx)(d.j0,{name:"name",id:"name",label:"Name (internal admin use only)",isRequired:!0,variant:"stacked"}),D.component!==j.re.TCF_OVERLAY&&(0,n.jsx)(f.d,{name:"component",id:"component",options:y,label:"Experience type",layout:"stacked",disabled:!!B.component,isRequired:!0}),(0,n.jsx)(i.UO1,{in:D.component!==j.re.PRIVACY_CENTER&&D.component!==j.re.HEADLESS,animateOpacity:!0,children:(0,n.jsx)(i.xuv,{p:"1px",children:(0,n.jsx)(d.w8,{name:"dismissable",id:"dismissable",label:"Allow user to dismiss",variant:"stacked"})})}),(0,n.jsx)(i.UO1,{in:D.component===j.re.BANNER_AND_MODAL,animateOpacity:!0,children:(0,n.jsx)(f.d,{name:"layer1_button_options",id:"layer1_button_options",options:k,label:"Banner options",layout:"stacked",disabled:D.component!==j.re.BANNER_AND_MODAL})}),(0,n.jsx)(b.Z,{label:"Associated properties",addButtonLabel:"Add property",idField:"id",nameField:"name",allItems:G.map(e=>({id:e.id,name:e.name})),values:null!==(t=D.properties)&&void 0!==t?t:[],setValues:e=>L("properties",e),draggable:!0,maxHeight:100,baseTestId:"property"}),(0,n.jsx)(i.izJ,{}),(0,n.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",children:"Privacy notices"}),D.component===j.re.TCF_OVERLAY?(0,n.jsx)(b.Z,{addButtonLabel:"Add privacy notice",allItems:Z.map(e=>e.id),values:function(e){if(!e.privacy_notice_ids)return[C];let a=e.privacy_notice_ids;return a.includes(C)||a.push(C),a}(D),setValues:e=>L("privacy_notice_ids",e),canDeleteItem:e=>e!==C,getTooltip:e=>{if(e===C)return"TCF Purposes are required by the framework and cannot be deleted."},getItemLabel:Y,draggable:!0,baseTestId:"privacy-notice"}):(0,n.jsx)(b.Z,{addButtonLabel:"Add privacy notice",allItems:(e=>{var a;let t=e.map(e=>{var a;return null===(a=e.children)||void 0===a?void 0:a.map(e=>e.id)}).flat();return null!==(a=E.filter(e=>!t.includes(e.id)))&&void 0!==a?a:[]})(E).map(e=>e.id),values:null!==(x=D.privacy_notice_ids)&&void 0!==x?x:[],setValues:e=>L("privacy_notice_ids",e),getItemLabel:Y,draggable:!0,baseTestId:"privacy-notice"}),D.component===j.re.BANNER_AND_MODAL?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.UO1,{in:!!(null===(a=D.privacy_notice_ids)||void 0===a?void 0:a.length),animateOpacity:!0,children:(0,n.jsx)(i.xuv,{p:"1px",children:(0,n.jsx)(d.w8,{name:"show_layer1_notices",id:"show_layer1_notices",label:"Add privacy notices to banner",variant:"stacked"})})}),(0,n.jsx)(i.izJ,{})]}):null,(0,n.jsx)(i.xvT,{as:"h2",fontWeight:"600",children:"Locations & Languages"}),(0,n.jsx)(b.Z,{label:"Locations for this experience",addButtonLabel:"Add location",allItems:V,values:null!==(A=D.regions)&&void 0!==A?A:[],setValues:e=>L("regions",e),getItemLabel:e=>p.Z8[e],draggable:!0,baseTestId:"location"}),T?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{label:"Languages for this experience",addButtonLabel:"Add language",values:null!==(R=D.translations)&&void 0!==R?R:[],setValues:e=>L("translations",e),idField:"language",canDeleteItem:e=>!e.is_default,allItems:W.slice().sort((e,a)=>e.name.localeCompare(a.name)).map(e=>({language:e.id,is_default:!1})),getItemLabel:e=>{let a=W.find(a=>a.id===e.language),t=a?a.name:e.language;return"".concat(t).concat(e.is_default?" (Default)":"")},createNewValue:e=>N(e.value),onRowClick:O,selectOnAdd:!0,draggable:!0,baseTestId:"language"}),(0,n.jsx)(d.w8,{name:"auto_detect_language",id:"auto_detect_language",label:"Auto detect language",variant:"stacked"})]}):(0,n.jsx)(i.wpx,{icon:(0,n.jsx)(i.mrv,{}),iconPosition:"end",onClick:()=>O(D.translations[0]),"data-testid":"edit-experience-btn",children:"Edit experience text"}),(0,n.jsx)(d.w8,{name:"auto_subdomain_cookie_deletion",id:"auto_subdomain_cookie_deletion",label:"Automatically delete subdomain cookies",variant:"stacked",tooltip:"If enabled, automatically deletes cookies set on subdomains in addition to main domain where appropriate. Recommended to enable for full consent compliance."})]})}},16277:function(e,a,t){t.d(a,{f:function(){return _}});var n=t(24246),i=t(56351),l=t(34090),s=t(56141),o=t.n(s),r=t(27378),d=t(40324),c=t(87361),u=t(57899),p=t(90980),b=t(60325),m=t(16194),x=t(21702);let _=e=>{let{languageName:a}=e;return(0,n.jsx)(c.Z,{text:"This is a default translation provided by Fides. If you've modified the default English language text, these translations will not match, so verify any changes with a native ".concat(a," speaker before using."),"data-testid":"oob-translation-notice"})};a.Z=e=>{var a,t,s,c,v,h,g;let j,{translation:f,translationsEnabled:y,isOOB:k,onReturnToMainForm:C}=e,{values:w,setFieldValue:A,errors:R,touched:E,setTouched:T}=(0,l.u6)(),O=(0,r.useMemo)(()=>{let{name:e,...a}=f;return a},[f]),N=!!O.title&&!k,I=(0,b.y3)(w.component),D=w.translations.findIndex(e=>e.language===f.language),L=!o()(w.translations[D],O),{onOpen:P,isOpen:q,onClose:z}=(0,i.qY0)(),{onOpen:B,isOpen:F,onClose:S}=(0,i.qY0)(),Z=()=>{L||k?P():C()},Y=e=>{let a=w.translations.map((a,t)=>({...a,is_default:t===e}));a.unshift(a.splice(e,1)[0]),A("translations",a),C()},M=(0,n.jsxs)("div",{className:"flex justify-between border-t border-[#DEE5EE] p-4",children:[(0,n.jsx)(i.wpx,{onClick:Z,"data-testid":"cancel-btn",children:"Cancel"}),(0,n.jsx)(i.wpx,{onClick:()=>{w.translations[D].is_default&&!O.is_default?B():C()},type:"primary","data-testid":"save-btn",disabled:!L&&!k||!!R.translations,children:N?"Save":"Add translation"})]});return j=y?N?"You have unsaved changes to this translation. Discard changes?":"This translation has not been added to your experience.  Discard translation?":"You have unsaved changes to this experience text. Discard changes?",(0,n.jsxs)(m.RN,{buttonPanel:M,children:[(0,n.jsx)(p.R,{onClick:Z,mt:4}),(0,n.jsx)(u.Z,{isOpen:q,onClose:z,title:y?"Translation not saved":"Text not saved",message:(0,n.jsx)(i.xvT,{children:j}),confirmButtonText:"Discard",handleConfirm:()=>{let e=w.translations.slice();N?e[D]={...O,title:O.title,description:O.description}:e.splice(D,1),A("translations",e);let{translations:a,...t}=E;T({...t}),C()}}),(0,n.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",children:y?"Edit ".concat(f.name," translation"):"Edit experience text"}),k?(0,n.jsx)(_,{languageName:f.name}):null,y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.w8,{name:"translations.".concat(D,".is_default"),id:"translations.".concat(D,".is_default"),label:"Default language",isDisabled:!!O.is_default,variant:"stacked"}),(0,n.jsx)(u.Z,{isOpen:F,onClose:S,title:"Update default language",message:(0,n.jsx)(i.xvT,{children:"Are you sure you want to update the default language of this experience?"}),handleConfirm:()=>Y(D)})]}),(0,n.jsx)(d.j0,{name:"translations.".concat(D,".title"),id:"translations.".concat(D,".title"),label:"Title",isRequired:!0,variant:"stacked"}),(0,n.jsx)(d.Ks,{name:"translations.".concat(D,".description"),id:"translations.".concat(D,".description"),label:"Description",isRequired:!0,variant:"stacked"}),(w.component===x.re.BANNER_AND_MODAL||w.component===x.re.TCF_OVERLAY)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.j0,{name:"translations.".concat(D,".banner_title"),id:"translations.".concat(D,".banner_title"),label:"Banner title (optional)",tooltip:"A separate title for the banner (defaults to main title)",variant:"stacked"}),(0,n.jsx)(d.Ks,{name:"translations.".concat(D,".banner_description"),id:"translations.".concat(D,".banner_description"),label:"Banner description (optional)",tooltip:"A separate description for the banner (defaults to main description)",variant:"stacked"})]}),w.component===x.re.TCF_OVERLAY&&(0,n.jsx)(d.j0,{name:"translations.".concat(D,".purpose_header"),id:"translations.".concat(D,".purpose_header"),label:"Purpose header (optional)",tooltip:"Appears above the Purpose list section of the TCF banner",variant:"stacked"}),(0,n.jsx)(d.j0,{name:"translations.".concat(D,".accept_button_label"),id:"translations.".concat(D,".accept_button_label"),label:'"Accept" button label',isRequired:!0,variant:"stacked"}),(0,n.jsx)(d.j0,{name:"translations.".concat(D,".reject_button_label"),id:"translations.".concat(D,".reject_button_label"),label:'"Reject" button label',isRequired:!0,variant:"stacked"}),(null===(a=I.privacy_preferences_link_label)||void 0===a?void 0:a.included)&&(0,n.jsx)(d.j0,{name:"translations.".concat(D,".privacy_preferences_link_label"),id:"translations.".concat(D,".privacy_preferences_link_label"),label:'"Manage privacy preferences" button label',variant:"stacked",isRequired:null===(t=I.privacy_preferences_link_label)||void 0===t?void 0:t.required}),(null===(s=I.save_button_label)||void 0===s?void 0:s.included)&&(0,n.jsx)(d.j0,{name:"translations.".concat(D,".save_button_label"),id:"translations.".concat(D,".save_button_label"),label:'"Save" button label',variant:"stacked",isRequired:I.save_button_label.required}),(null===(c=I.acknowledge_button_label)||void 0===c?void 0:c.included)&&(0,n.jsx)(d.j0,{name:"translations.".concat(D,".acknowledge_button_label"),id:"translations.".concat(D,".acknowledge_button_label"),label:'"Acknowledge" button label',variant:"stacked",isRequired:I.acknowledge_button_label.required}),(null===(v=I.privacy_policy_link_label)||void 0===v?void 0:v.included)&&(0,n.jsx)(d.j0,{name:"translations.".concat(D,".privacy_policy_link_label"),id:"translations.".concat(D,".privacy_policy_link_label"),label:"Privacy policy link label (optional)",variant:"stacked"}),(null===(h=I.privacy_policy_url)||void 0===h?void 0:h.included)&&(0,n.jsx)(d.j0,{name:"translations.".concat(D,".privacy_policy_url"),id:"translations.".concat(D,".privacy_policy_url"),label:"Privacy policy link URL (optional)",variant:"stacked"}),(null===(g=I.modal_link_label)||void 0===g?void 0:g.included)&&(0,n.jsx)(d.j0,{name:"translations.".concat(D,".modal_link_label"),id:"translations.".concat(D,".modal_link_label"),label:"Trigger link label (optional)",tooltip:"Include text here if you would like the Fides CMP to manage the copy of the button that is included on your site to open the CMP.",variant:"stacked"})]})}}}]);