"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7671],{42478:(e,a,t)=>{var s=t(77940),i=t(29079),n=t(637),r=t.n(n),l=t(14867),c=t.n(l),m=t(97598),d=t.n(m),_=t(86326),o=t(35623),u=t(23507),v=t(53225),y=t(16520),D=t(47279),E=t(56237),f=t(70827),p=t(98132),g=t(29481),b=t(96478),j=t(49528);const I=i.Ay.bind(null,{endpoint:"users.user_favorites_category_api",rules:[{args:["category_id","user_id"],converters:{category_id:"IntegerConverter",user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0}]},{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1}]},{args:["category_id"],converters:{category_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1}]}]},"/"),N=i.Ay.bind(null,{endpoint:"users.user_favorites_event_api",rules:[{args:["event_id","user_id"],converters:{event_id:"IntegerConverter",user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0}]},{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1}]},{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1}]}]},"/");function F({userId:e}){return _.createElement(_.Fragment,null,_.createElement("div",{className:"row"},_.createElement(x,{userId:e}),_.createElement(A,{userId:e})),_.createElement("div",{className:"row"},_.createElement(h,{userId:e})))}function A({userId:e}){const[a,t]=(0,_.useState)(null),[s,i]=(0,_.useState)(!0),n=(0,_.useCallback)((async()=>{let a;try{a=await j.indicoAxios.get(I(null!==e?{user_id:e}:{}))}catch(e){return void(0,j.handleAxiosError)(e)}t(a.data),i(!1)}),[e]);(0,_.useEffect)((()=>{n()}),[n]);return _.createElement("div",{className:"column col-50"},_.createElement("div",{className:"i-box just-group-list"},_.createElement("div",{className:"i-box-header"},_.createElement("div",{className:"i-box-title"},_.createElement(b.Translate,null,"Favorite Categories"))),_.createElement("div",{className:"i-box-content"},s?_.createElement(u.A,{active:!0,inline:!0,className:"users-client-js-___Favorites-module__fav-loader___9Opw1"}):null!==a&&Object.keys(a).length>0?_.createElement(v.A,{celled:!0,className:"users-client-js-___Favorites-module__fav-list___KFdnj"},Object.values(a).map((e=>_.createElement(v.A.Item,{key:e.id,className:"users-client-js-___Favorites-module__fav-item___FxbQW"},_.createElement(v.A.Content,null,_.createElement("div",{className:"users-client-js-___Favorites-module__list-flex___Pvha0"},_.createElement("div",null,_.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title),_.createElement("br",null),_.createElement(f.TooltipIfTruncated,null,_.createElement("span",{className:"users-client-js-___Favorites-module__detail___IlIkm"},e.chain_titles.slice(0,-1).join(" » ")))),_.createElement(y.A,{trigger:_.createElement(D.A,{className:"users-client-js-___Favorites-module__delete-button___wFq64",name:"close",onClick:()=>(async e=>{try{await j.indicoAxios.delete(I({category_id:e}))}catch(e){return void(0,j.handleAxiosError)(e)}t((a=>r().omit(a,e)))})(e.id),link:!0}),content:b.Translate.string("Remove from favorites"),position:"bottom center"}))))))):_.createElement("div",{className:"users-client-js-___Favorites-module__empty-favorites___7j0mT"},_.createElement(b.Translate,null,"You have not marked any category as favorite.")))))}function h({userId:e}){const[a,t]=(0,_.useState)(null),[s,i]=(0,_.useState)(!0),n=(0,_.useCallback)((async()=>{let a;try{a=await j.indicoAxios.get(N(null!==e?{user_id:e}:{}))}catch(e){return void(0,j.handleAxiosError)(e)}t(a.data),i(!1)}),[e]);(0,_.useEffect)((()=>{n()}),[n]);return _.createElement("div",{className:"users-client-js-___Favorites-module__favorite-event-container___MDESj"},_.createElement("div",{className:"i-box just-group-list"},_.createElement("div",{className:"i-box-header"},_.createElement("div",{className:"i-box-title"},_.createElement(b.Translate,null,"Favorite Events"))),_.createElement("div",{className:"i-box-content"},s?_.createElement(u.A,{active:!0,inline:!0,className:"users-client-js-___Favorites-module__fav-loader___9Opw1"}):null!==a&&Object.keys(a).length>0?_.createElement(v.A,{celled:!0,className:"users-client-js-___Favorites-module__fav-list___KFdnj"},Object.values(a).sort(((e,a)=>c()(a.start_dt)-c()(e.start_dt))).map((e=>_.createElement(v.A.Item,{key:e.url,className:"users-client-js-___Favorites-module__fav-item___FxbQW"},_.createElement(v.A.Content,null,_.createElement("div",{className:"users-client-js-___Favorites-module__list-flex___Pvha0"},_.createElement("span",{className:"users-client-js-___Favorites-module__date-span___G-Q4g"},c()(e.start_dt).format("D MMM YYYY")),_.createElement("span",{className:"users-client-js-___Favorites-module__event-name-box___siq9D"},_.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title),_.createElement("span",{dangerouslySetInnerHTML:{__html:e.label_markup}}),_.createElement("br",null),_.createElement(f.TooltipIfTruncated,null,_.createElement("span",{className:"users-client-js-___Favorites-module__detail___IlIkm"},e.chain_titles?e.chain_titles.join(" » "):_.createElement(b.Translate,null,"Unlisted")))),_.createElement(y.A,{trigger:_.createElement(D.A,{className:"users-client-js-___Favorites-module__delete-button___wFq64",name:"close",onClick:()=>(async e=>{try{await j.indicoAxios.delete(N({event_id:e}))}catch(e){return void(0,j.handleAxiosError)(e)}t((a=>r().omit(a,e)))})(e.id),link:!0}),content:b.Translate.string("Remove from favorites"),position:"bottom center"}))))))):_.createElement("div",{className:"users-client-js-___Favorites-module__empty-favorites___7j0mT"},_.createElement(b.Translate,null,"You have not marked any event as favorite.")))))}function x({userId:e}){const[a,[t,i],n]=(0,g.EV)(e);return _.createElement("div",{className:"column col-50"},_.createElement("div",{className:"i-box just-group-list"},_.createElement("div",{className:"i-box-header"},_.createElement("div",{className:"i-box-title"},_.createElement(b.Translate,null,"Favorite Users"))),_.createElement("div",{className:"i-box-content"},n?_.createElement(u.A,{active:!0,inline:!0,className:"users-client-js-___Favorites-module__fav-loader___9Opw1"}):null!==a&&Object.keys(a).length>0?_.createElement(v.A,{celled:!0,className:"users-client-js-___Favorites-module__fav-list___KFdnj"},Object.values(r().orderBy(a,["name"])).map((e=>_.createElement(v.A.Item,{key:e.identifier,className:"users-client-js-___Favorites-module__fav-item___FxbQW"},_.createElement("div",{className:"users-client-js-___Favorites-module__list-flex___Pvha0"},_.createElement("div",null,_.createElement("span",null,e.name),_.createElement("br",null),_.createElement(f.TooltipIfTruncated,null,_.createElement("span",{className:"users-client-js-___Favorites-module__detail___IlIkm"},e.detail))),_.createElement(y.A,{trigger:_.createElement(D.A,{className:"users-client-js-___Favorites-module__delete-button___wFq64",name:"close",onClick:()=>i(e.userId),link:!0}),content:b.Translate.string("Remove from favorites"),position:"bottom center"})))))):_.createElement("div",{className:"users-client-js-___Favorites-module__empty-favorites___7j0mT"},_.createElement(b.Translate,null,"You have not marked any user as favorite.")))),_.createElement(p.ge,{existing:Object.values(a).map((e=>e.identifier)),onAddItems:e=>e.forEach((e=>t(e.userId))),triggerFactory:e=>_.createElement(E.A,(0,s.A)({},e,{className:"users-client-js-___Favorites-module__submit-button___AeA4z "+(e&&e.className||"")}),_.createElement(b.Translate,null,"Add Indico user"))}))}window.setupFavoriteSelection=function(e){o.render(_.createElement(F,{userId:e}),document.getElementById("user-favorites"))},F.propTypes={userId:d().number},F.defaultProps={userId:null},A.propTypes={userId:d().number},A.defaultProps={userId:null},h.propTypes={userId:d().number},h.defaultProps={userId:null},x.propTypes={userId:d().number},x.defaultProps={userId:null}}},e=>{e.O(0,[4644,4394,2076],(()=>{return a=42478,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_users.favorites.d810f151.bundle.js.map