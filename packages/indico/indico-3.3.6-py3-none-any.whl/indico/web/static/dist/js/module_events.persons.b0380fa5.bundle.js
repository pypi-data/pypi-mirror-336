"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[3489],{83783:(e,i,a)=>{a(42383);var n=a(29079),t=a(97598),o=a.n(t),s=a(86326),r=a(35623),l=a(70827),d=a(46145),f=a(96478),c=a(49528),m=a(24372);const u=n.Ay.bind(null,{endpoint:"persons.update_person",rules:[{args:["event_id","person_id"],converters:{event_id:"IntegerConverter",person_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"persons",isDynamic:!1},{data:"/",isDynamic:!1},{data:"person_id",isDynamic:!0}]}]},"/");function p({eventId:e,person:i,hasPredefinedAffiliations:a,allowCustomAffiliations:n,replacePersonRow:t}){const[o,r]=(0,s.useState)(!1);return s.createElement(s.Fragment,null,s.createElement("a",{className:"i-link icon-edit",title:f.Translate.string("Edit person information"),onClick:()=>r(!0)}),o&&s.createElement(l.PersonDetailsModal,{person:i,hasPredefinedAffiliations:a,allowCustomAffiliations:n,hideEmailField:!0,onClose:()=>r(!1),onSubmit:async(n,o)=>{const s=(0,d.getChangedValues)(n,o);let r;a?s.affiliationData&&(s.affiliation=s.affiliationData.text.trim(),s.affiliationId=s.affiliationData.id,delete s.affiliationData):delete s.affiliationData;try{r=await c.indicoAxios.patch(u({event_id:e,person_id:i.id}),(0,m.snakifyKeys)(s))}catch(e){return(0,d.handleSubmitError)(e,{affiliation_data:"affiliationData"})}t(r.data.html),await new Promise((()=>{}))}}))}p.propTypes={eventId:o().number.isRequired,person:o().object.isRequired,hasPredefinedAffiliations:o().bool.isRequired,allowCustomAffiliations:o().bool.isRequired,replacePersonRow:o().func.isRequired},window.setupEditEventPerson=(e,i,a,n)=>{const t=document.querySelector(`#edit-person-${i.id}`);r.render(s.createElement(p,{eventId:e,person:(0,m.camelizeKeys)(i),hasPredefinedAffiliations:a,allowCustomAffiliations:n,replacePersonRow:e=>{r.unmountComponentAtNode(t),$(`#person-${i.id}`).html(e)}}),t)}}},e=>{e.O(0,[4644,4394,2076],(()=>{return i=83783,e(e.s=i);var i}));e.O()}]);
//# sourceMappingURL=module_events.persons.b0380fa5.bundle.js.map