$id: "https://gael-systems.com/drb-python"
$schema: "http://json-schema.org/draft-07/schema"
title: DRB-Python Topic Schema Definition
description: |
  Schema definition for DRB Python topic, each topic/ implementation
  must contain a `cortex.yml` file following this schema to be correctly loaded
  by the resolver of DRB library.
definitions:
  attribute:
    type: object
    additionalProperties: no
    properties:
      name:
        type: string
        style: inline
      namespace:
        type: string
        style: inline
      value:
        type: [boolean, number, string, 'null']
    required: [name]
  child:
    type: object
    additionalProperties: no
    properties:
      name:
        type: string
        style: inline
      namespace:
        type: string
        style: inline
      namespaceAware:
        type: boolean
    required: [name]
  signature:
    type: object
    additionalProperties: yes
    properties:
      name:
        type: string
        style: inline
      namespace:
        type: string
        style: inline
      path:
        type: string
        style: inline
      attributes:
        type: array
        minItems: 1
        items: { $ref: '#/definitions/attribute'}
      children:
        type: array
        minItems: 1
        items: { $ref: '#/definitions/child' }
      parent: { $ref: '#/definitions/signature' }
      python:
        type: string
        style: literal
    minProperties: 1
  subClass:
    properties:
      id:
        type: string
        style: inline
        format: uuid
      ovveride: { type: boolean }
    additionalProperties: no
    required: [id]
properties:
  id:
    type: string
    format: uuid
  subClassOf:
    oneOff:
     - type: string
       format: uuid
     - $ref: '#/definitions/subClass'
  label:
    type: string
  description:
    type: string
  category:
    type: string
    style: inline
    enum: [SECURITY, PROTOCOL, CONTAINER, FORMATTING]
  factory:
    type: string
  forced:
    type: boolean
  signatures:
    type: array
    items: { $ref: '#/definitions/signature' }
additionalProperties: no
required: [id, label, category]