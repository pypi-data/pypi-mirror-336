import{p as _e,a0 as D,Y as H,_ as ge,X as pe,ad as $e,ae as he,t as h,f as O,s as o,z as w,a as d,d as t,u as be,V as xe,ac as we,K as E,aa as ke,N as l,g as n,S as Le,aO as ye,e as u,T as Se,ak as Ue,am as Te,aq as Be,a5 as V,a3 as $,a7 as X,a9 as R,h as Y,ao as J,av as Fe}from"./Style.js";import{T as Ie}from"./Toggle.js";var Pe=h('<div class="font-bold"> </div> <div> </div>',1),Ae=h('<div class="my-5"></div>'),Oe=h("<!> <!>",1),Ee=h("<div><!></div>"),Re=h('<form method="post"><!> <!> <!> <!> <!> <div class="flex justify-center w-full"><div><!></div> <!></div></form>'),Ge=h('<div class="flex justify-center w-full"><div class="w-52 h-52 mt-6 mb-14"><img loading="lazy" alt="LOGO" referrerpolicy="no-referrer"></div></div> <!> <div class="flex justify-center w-full"><div><!></div></div> <div id="loaded" class="h-0 w-0"></div>',1);function Ne(Q,W){_e(W,!0);const[Z,ee]=xe(),f=()=>pe(we,"$share",Z),G="/a/login/",N="/a/login/fallback/",ae="/a/saml/init/";let j=D(!1),re=H(te),_=D(!1),k=ge([]);function v(e){return ke(f(),e)}function te(){return f().backend.sso?window.location.pathname.includes("fallback")?N:ae:G}function q(){if(!l(_))return;let e=document.getElementById("id_username");e&&(localStorage.login_username=e.value)}$e(()=>{l(j)&&(localStorage.login_remember=l(_)?"1":"0",l(_)?q():localStorage.login_username="")});function se(){if(localStorage.login_remember=="1"){E(_,!0);let e=document.getElementById("id_username");e&&localStorage.login_username&&(e.value=localStorage.login_username)}E(j,!0)}function oe(){let e=document.querySelectorAll(".aw-backend-form-alert");if(e)for(let s of e)s.field?k.push({color:"red",title:`${v("common.invalid_value")}: "${s.field}"`,msg:s.innerText}):k.push({color:"red",title:v("common.invalid_form"),msg:s.innerText})}he(()=>{se(),oe()});var M=Ge(),z=O(M),le=n(z),ne=n(le),C=o(z,2);{var ie=e=>{var s=Ae();Le(s,21,()=>k,Se,(L,g)=>{const y=H(()=>l(g).color||"red");ye(L,{get color(){return l(y)},class:"mx-20",children:(S,K)=>{var b=Pe(),U=O(b),T=n(U),B=o(U,2),F=n(B);d(()=>{u(T,l(g).title),u(F,l(g).msg)}),t(S,b)},$$slots:{default:!0}})}),t(e,s)};w(C,e=>{k.length&&e(ie)})}var de=o(C,2),ve=n(de),ce=n(ve);{var ue=e=>{Ue(e,{})},me=e=>{var s=Re(),L=n(s);Te(L,Be);var g=o(L,2);V(g,{for:"id_username",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.user")]),t(a,r)},$$slots:{default:!0}});var y=o(g,2);X(y,{type:"text",id:"id_username",name:"username",oninput:q});var S=o(y,2);{var K=a=>{var c=Oe(),r=O(c);V(r,{for:"id_password",class:"mt-2",children:(I,m)=>{var p=$();d(P=>u(p,P),[()=>v("login.pwd")]),t(I,p)},$$slots:{default:!0}});var i=o(r,2);X(i,{type:"password",name:"password",id:"id_password"}),t(a,c)};w(S,a=>{(!f().backend.sso||window.location.pathname.includes("fallback"))&&a(K)})}var b=o(S,2);Ie(b,{class:"mt-2",get checked(){return l(_)},set checked(a){E(_,a,!0)},children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.saveUser")]),t(a,r)},$$slots:{default:!0}});var U=o(b,2),T=n(U),B=n(T);R(B,{type:"submit",class:"mt-5",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.btn")]),t(a,r)},$$slots:{default:!0}});var F=o(T,2);{var fe=a=>{var c=Ee(),r=n(c);{var i=m=>{R(m,{href:G,class:`ml-2 mt-5 ${J}`,children:(p,P)=>{var x=$();d(A=>u(x,A),[()=>v("login.sso")]),t(p,x)},$$slots:{default:!0}})},I=m=>{R(m,{href:N,class:`ml-2 mt-5 ${J}`,children:(p,P)=>{var x=$();d(A=>u(x,A),[()=>v("login.localUser")]),t(p,x)},$$slots:{default:!0}})};w(r,m=>{window.location.pathname.includes("fallback")?m(i):m(I,!1)})}t(a,c)};w(F,a=>{f().backend.sso&&a(fe)})}d(()=>Y(s,"action",l(re))),t(e,s)};w(ce,e=>{f().backend?e(me,!1):e(ue)})}d(()=>Y(ne,"src",f().backend.logo)),t(Q,M),be(),ee()}Fe(Ne,{target:document.getElementById("login")});
