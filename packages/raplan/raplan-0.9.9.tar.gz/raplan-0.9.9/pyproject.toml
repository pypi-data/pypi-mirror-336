[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "raplan"
version = "0.9.9"
description = "Ratio maintenance planning and scheduling in Python."
keywords = [
    "planning",
    "scheduling",
    "distribution",
    "visualization",
    "visualisation",
]
authors = [{ name = "Ratio Innovations B.V.", email = "info@ratio-case.nl" }]
license = "GPL-3.0-or-later"
license-files = ["LICENSE.md"]
readme = "README.md"
requires-python = ">=3.11"
dependencies = ["pyserde[yaml]>=0.23.0"]

[project.optional-dependencies]
plot = ["kaleido==0.2.1", "plotly>=6.0.0"]
analysis = ["ragraph>=1.22.7"]
excel = ["openpyxl>=3.1.5"]
all = ["kaleido==0.2.1", "plotly>=6.0.0", "ragraph>=1.22.7", "openpyxl>=3.1.5"]

[dependency-groups]
test = [
    "pytest>=8.3.4",
    "pytest-cov>=6.0.0",
    "pytest-examples>=0.0.15",
    "pytest-watcher>=0.4.3",
]
experiment = ["jupyterlab>=4.3.5", "pandas>=2.2.3"]

[tool.uv]
package = true
default-groups = ["experiment", "test"]

[project.urls]
Homepage = "https://raplan.ratio-case.nl"
Repository = "https://gitlab.com/ratio-case-os/python/raplan"
"Bug Tracker" = "https://gitlab.com/ratio-case-os/python/raplan/-/issues"
Changelog = "https://raplan.ratio-case.nl/CHANGELOG/"

[tool.pytest.ini_options]
addopts = "-s --cov --cov-report xml:./.pytest_cache/coverage.xml --cov-report term-missing --basetemp ./tests/.temp"
testpaths = ["tests"]
markers = ["slow", "format"]

[tool.coverage.run]
source = ["raplan"]
disable_warnings = ["module-not-imported"]

[tool.coverage.report]
show_missing = true
skip_covered = true

[tool.raver]
ref = "origin/main"
module = "./src/raplan/__init__.py"
changelog = "./docs/CHANGELOG.md"

[tool.ruff]
line-length = 100
lint.select = [
    "E", # pycodestyle
    "F", # pyflakes
]
target-version = "py311"
